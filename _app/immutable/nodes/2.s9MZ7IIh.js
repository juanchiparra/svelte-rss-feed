import"../chunks/DsnmJJEf.js";import{A as Ce,h as ce,ag as dt,C as Ke,x as ft,w as mt,f,W as gt,y as vt,H as pt,z as Pe,B as De,K as ye,ah as yt,al as ht,D as Ne,G as _t,F as ve,ap as Ve,ad as Ye,Q as bt,aK as He,aL as Ge,I as Qe,J as wt,aM as Ae,aN as Le,aO as Je,aP as xe,aQ as St,aj as kt,aR as Et,ao as At,aS as xt,Y as Tt,a9 as Ct,aT as Ze,aU as Dt,aF as $e,d as he,aV as et,aW as Lt,aX as qt,M as It,aE as Rt,aG as Mt,aY as Ot,p as fe,l as j,t as Y,n as F,o as me,v as R,q as x,aZ as Ft,s as S,a6 as Te,m as be,a_ as qe,aH as le,X as je,b as Ie,R as V,aI as ge}from"../chunks/BEcdxAbO.js";import{p as z,i as se,s as Nt,a as Ut}from"../chunks/ByTpGWCj.js";import{s as Bt,g as zt}from"../chunks/D4vSaX--.js";import{c as tt,e as rt,s as $,d as Pt,r as Ht}from"../chunks/Cu1k3PKI.js";import{s as Z}from"../chunks/CZhqOxrB.js";import{i as Gt}from"../chunks/CCaxT0op.js";function ue(e,t){return t}function jt(e,t,r){for(var n=e.items,i=[],s=t.length,o=0;o<s;o++)Et(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var l=r.parentNode;At(l),l.append(r),n.clear(),te(e,t[0].prev,t[s-1].next)}xt(i,()=>{for(var v=0;v<s;v++){var c=t[v];a||(n.delete(c.k),te(e,c.prev,c.next)),Je(c.e,!a)}})}function de(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},l=(t&Ze)!==0;if(l){var v=e;o=ce?Ce(dt(v)):v.appendChild(Ke())}ce&&ft();var c=null,m=!1,g=new Map,b=gt(()=>{var A=r();return Ye(A)?A:A==null?[]:Ve(A)}),u,p;function _(){Wt(p,u,a,g,o,i,t,n,r),s!==null&&(u.length===0?c?Qe(c):c=Ne(()=>s(o)):c!==null&&wt(c,()=>{c=null}))}mt(()=>{p??=Tt,u=f(b);var A=u.length;if(m&&A===0)return;m=A===0;let q=!1;if(ce){var I=vt(o)===pt;I!==(A===0)&&(o=Pe(),Ce(o),De(!1),q=!0)}if(ce){for(var T=null,k,y=0;y<A;y++){if(ye.nodeType===yt&&ye.data===ht){o=ye,q=!0,De(!1);break}var E=u[y],M=n(E,y);k=Ue(ye,a,T,null,E,M,y,i,t,r),a.items.set(M,k),T=k}A>0&&Ce(Pe())}if(ce)A===0&&s&&(c=Ne(()=>s(o)));else if(_t()){var B=new Set,X=ve;for(y=0;y<A;y+=1){E=u[y],M=n(E,y);var P=a.items.get(M)??g.get(M);P?(t&(xe|Ae))!==0&&at(P,E,y,t):(k=Ue(null,a,null,null,E,M,y,i,t,r,!0),g.set(M,k)),B.add(M)}for(const[H,ae]of a.items)B.has(H)||X.skipped_effects.add(ae.e);X.add_callback(_)}else _();q&&De(!0),f(b)}),ce&&(o=ye)}function Wt(e,t,r,n,i,s,o,a,l){var v=(o&Dt)!==0,c=(o&(xe|Ae))!==0,m=t.length,g=r.items,b=r.first,u=b,p,_=null,A,q=[],I=[],T,k,y,E;if(v)for(E=0;E<m;E+=1)T=t[E],k=a(T,E),y=g.get(k),y!==void 0&&(y.a?.measure(),(A??=new Set).add(y));for(E=0;E<m;E+=1){if(T=t[E],k=a(T,E),y=g.get(k),y===void 0){var M=n.get(k);if(M!==void 0){n.delete(k),g.set(k,M);var B=_?_.next:u;te(r,_,M),te(r,M,B),Re(M,B,i),_=M}else{var X=u?u.e.nodes_start:i;_=Ue(X,r,_,_===null?r.first:_.next,T,k,E,s,o,l)}g.set(k,_),q=[],I=[],u=_.next;continue}if(c&&at(y,T,E,o),(y.e.f&Le)!==0&&(Qe(y.e),v&&(y.a?.unfix(),(A??=new Set).delete(y))),y!==u){if(p!==void 0&&p.has(y)){if(q.length<I.length){var P=I[0],H;_=P.prev;var ae=q[0],ne=q[q.length-1];for(H=0;H<q.length;H+=1)Re(q[H],P,i);for(H=0;H<I.length;H+=1)p.delete(I[H]);te(r,ae.prev,ne.next),te(r,_,ae),te(r,ne,P),u=P,_=ne,E-=1,q=[],I=[]}else p.delete(y),Re(y,u,i),te(r,y.prev,y.next),te(r,y,_===null?r.first:_.next),te(r,_,y),_=y;continue}for(q=[],I=[];u!==null&&u.k!==k;)(u.e.f&Le)===0&&(p??=new Set).add(u),I.push(u),u=u.next;if(u===null)continue;y=u}q.push(y),_=y,u=y.next}if(u!==null||p!==void 0){for(var K=p===void 0?[]:Ve(p);u!==null;)(u.e.f&Le)===0&&K.push(u),u=u.next;var N=K.length;if(N>0){var O=(o&Ze)!==0&&m===0?i:null;if(v){for(E=0;E<N;E+=1)K[E].a?.measure();for(E=0;E<N;E+=1)K[E].a?.fix()}jt(r,K,O)}}v&&Ct(()=>{if(A!==void 0)for(y of A)y.a?.apply()}),e.first=r.first&&r.first.e,e.last=_&&_.e;for(var oe of n.values())Je(oe.e);n.clear()}function at(e,t,r,n){(n&xe)!==0&&Ge(e.v,t),(n&Ae)!==0?Ge(e.i,r):e.i=r}function Ue(e,t,r,n,i,s,o,a,l,v,c){var m=(l&xe)!==0,g=(l&St)===0,b=m?g?bt(i,!1,!1):He(i):i,u=(l&Ae)===0?o:He(o),p={i:u,v:b,k:s,a:null,e:null,prev:r,next:n};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Ke())}return p.e=Ne(()=>a(e,b,u,v),ce),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?c||(t.first=p):(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Re(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==null&&s!==n;){var o=kt(s);i.before(s),s=o}}function te(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function nt(e,t,r){$e(()=>{var n=he(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}function ot(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ye(t))return Lt();for(var n of e.options)n.selected=t.includes(_e(n));return}for(n of e.options){var i=_e(n);if(qt(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Xt(e){var t=new MutationObserver(()=>{ot(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),It(()=>{t.disconnect()})}function Me(e,t,r=t){var n=!0;et(e,"change",i=>{var s=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),_e);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");o=a&&_e(a)}r(o)}),$e(()=>{var i=t();if(ot(e,i,n),n&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=_e(s),r(i))}e.__value=i,n=!1}),Xt(e)}function _e(e){return"__value"in e?e.__value:e.value}function Kt(e,t,r=t){var n=new WeakSet;et(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=Oe(e)?Fe(s):s,r(s),ve!==null&&n.add(ve),await Rt(),s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),(ce&&e.defaultValue!==e.value||he(t)==null&&e.value)&&(r(Oe(e)?Fe(e.value):e.value),ve!==null&&n.add(ve)),Mt(()=>{var i=t();if(e===document.activeElement){var s=Ot??ve;if(n.has(s))return}Oe(e)&&i===Fe(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Oe(e){var t=e.type;return t==="number"||t==="range"}function Fe(e){return e===""?null:+e}function W(e){return(e?.textContent||"").trim()}function re(e,t){const r=e?.getAttribute(t);return r??void 0}function U(e,t){const r=e.getElementsByTagNameNS?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t);return r&&r.length?r[0]:null}function pe(e,t){const r=e.getElementsByTagNameNS?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t);return Array.from(r)}function Vt(e){const t=e.querySelector("rss > channel, rdf\\:RDF > channel, channel")||U(e,"channel");if(!t)return null;const r=W(U(t,"title")||t.querySelector("title")),n=U(t,"link")||t.querySelector("link[href], link"),i=re(n,"href")||W(n),s=[],o=pe(t,"item");return(o.length?o:Array.from(t.querySelectorAll("item"))).forEach(a=>{const l=W(U(a,"title")||a.querySelector("title")),v=U(a,"link")||a.querySelector("link[href], link"),c=re(v,"href")||W(v),m=W(U(a,"guid")||a.querySelector("guid")),g=W(U(a,"pubDate")||a.querySelector("pubDate"))||W(U(a,"date")||a.querySelector("dc\\:date, date")),b=U(a,"encoded")||a.querySelector("content\\:encoded"),u=b?b.textContent||"":void 0,p=W(U(a,"description")||a.querySelector("description")),_=U(a,"enclosure")||a.querySelector("enclosure"),A=_?{url:re(_,"url"),type:re(_,"type")}:void 0,q=[],I=pe(a,"category"),T=(I.length?I:Array.from(a.querySelectorAll("category"))).map(k=>W(k)).filter(Boolean);s.push({title:l,link:c,guid:m,pubDate:g,description:p,content:p,"content:encoded":u,"media:content":q,enclosure:A,categories:T})}),{title:r,link:i,items:s}}function Yt(e){const t=U(e,"feed")||e.querySelector("feed");if(!t)return null;const r=W(U(t,"title")||t.querySelector("title"));let n;const i=pe(t,"link"),s=i.length?i:Array.from(t.querySelectorAll("link[href]"));for(const l of s){const v=(l.getAttribute("rel")||"alternate").toLowerCase(),c=re(l,"href");if(c&&(v==="alternate"||!n)&&(n=c,v==="alternate"))break}const o=[],a=pe(t,"entry");return(a.length?a:Array.from(t.querySelectorAll("entry"))).forEach(l=>{const v=W(U(l,"title")||l.querySelector("title"));let c;const m=pe(l,"link"),g=m.length?m:Array.from(l.querySelectorAll("link[href]"));for(const B of g){const X=(B.getAttribute("rel")||"alternate").toLowerCase(),P=re(B,"href");if(P&&(X==="alternate"||!c)&&(c=P,X==="alternate"))break}const b=W(U(l,"id")||l.querySelector("id")),u=W(U(l,"published")||l.querySelector("published")),p=W(U(l,"updated")||l.querySelector("updated")),_=U(l,"content")||l.querySelector("content"),A=re(_,"type")||"text",q=_&&_.textContent||"",I=W(U(l,"summary")||l.querySelector("summary")),T=g.find(B=>(B.getAttribute("rel")||"").toLowerCase()==="enclosure"),k=T?{url:re(T,"href"),type:re(T,"type")}:void 0,y=[],E=pe(l,"category"),M=(E.length?E:Array.from(l.querySelectorAll("category"))).map(B=>re(B,"term")||W(B)).filter(Boolean);o.push({title:v,link:c,guid:b,isoDate:p||u||void 0,content:I,"content:encoded":A.includes("html")?q:void 0,"media:content":y,enclosure:k,categories:M})}),{title:r,link:n,items:o}}function Se(e){const r=new DOMParser().parseFromString(e,"application/xml");if(r.querySelector("parsererror"))throw new Error("Invalid XML");return Vt(r)||Yt(r)||{title:void 0,link:void 0,items:[]}}const Qt="Uncategorized",Jt=[{name:"Politics",aliases:["politics","government","state","assembly","congress","parliament","politica","gobierno","estado","asamblea","congreso","parlamento"],keywords:["politica","gobierno","eleccion","elecciones","ministro","ministra","presidente","presidenta","partido","parlamento","congreso","alcalde","alcaldesa","diputado","senado","decreto","cne","tsj","constitucion","ley","mandato","gobernador","gobernadora"]},{name:"Economy",aliases:["economy","business","finance","markets","economia","negocios","finanzas","mercados"],keywords:["economia","inflacion","dolar","bolivar","banco","finanzas","mercado","precio","salario","impuesto","negocio","empresa","petroleo","exportacion","importacion","pib","credito","devaluacion","divisas","bcv","bono"]},{name:"Sports",aliases:["sports","sport","deporte"],keywords:["futbol","futbolista","gol","liga","beisbol","beisbolista","baloncesto","tenis","nba","mlb","mundial","partido","marcador","seleccion","vinotinto","olimpico","olimpiadas"]},{name:"Technology",aliases:["technology","tech","tecnologia"],keywords:["tecnologia","software","aplicacion","app","ia","inteligencia artificial","ciberseguridad","internet","redes sociales","google","apple","microsoft","android","ios","startup","algoritmo","programacion","nube","cloud","chip","semiconductor"]},{name:"Culture",aliases:["culture","arts","arte","cultural"],keywords:["cultura","arte","teatro","literatura","libro","musica","concierto","festival","cine","pelicula","exposicion","museo"]},{name:"Entertainment",aliases:["entertainment","showbiz","espectaculos","farándula","farandula"],keywords:["farandula","famoso","celebridad","espectaculo","television","serie","streaming","netflix","hollywood","premios","reality"]},{name:"Health",aliases:["health","wellness","salud","bienestar"],keywords:["salud","covid","coronavirus","hospital","medico","medicina","vacuna","oms","enfermedad","clinica","epidemia","pandemia"]},{name:"International",aliases:["world","global","mundo","internacional"],keywords:["eeuu","estados unidos","onu","europa","rusia","china","ucrania","conflicto","guerra","frontera","internacional","diplomacia","geopolitica"]},{name:"Society",aliases:["society","community","social","comunidad","país","pais"],keywords:["comunidad","educacion","escuela","universidad","transporte","servicios","protesta","ciudadania","barrio","familia","trabajo","empleo"]},{name:"Crime",aliases:["crime","crimen","public safety","security","police","seguridad","policiales"],keywords:["accidente","homicidio","robo","incendio","policia","tribunal","fiscalia","delito","crimen","detenido","carcel","secuestro"]},{name:"Opinion",aliases:["opinion","editorial","columns","columnas"],keywords:["opinion","editorial","columna","analisis","tribuna","ensayo"]},{name:"Weather",aliases:["weather","forecast","tiempo"],keywords:["clima","lluvia","tormenta","huracan","temperatura","sequia","alerta meteorologica"]},{name:"Science",aliases:["science","scientific","cientifica"],keywords:["ciencia","investigacion","estudio","cientifico","espacio","nasa","astronomia"]},{name:"Food",aliases:["food","dining","cuisine","gastronomia","comida","cocina"],keywords:["gastronomia","restaurante","receta","cocina","chef","comida","bebida"]}],Be={fallbackLabel:Qt,categories:Jt};function Q(e){if(e==null)return"";if(typeof e=="string")return e;if(Array.isArray(e))return Q(e[0]);if(typeof e=="object"){if(typeof e._=="string")return e._;if(typeof e["#text"]=="string")return e["#text"];if(typeof e.href=="string")return e.href;if(e.$&&typeof e.$.href=="string")return e.$.href;if(e.$&&typeof e.$.url=="string")return e.$.url;if(typeof e.url=="string")return e.url}try{return String(e)}catch{return""}}function We(e){if(!e)return null;const t=e.match(/<img\s+[^>]*src=["']([^"']+)["'][^>]*>/i);return t?t[1]:null}function Zt(e){const t=e.isoDate,r=e.pubDate,n=t||r;if(!n)return{date:null};const i=new Date(n);return isNaN(i.getTime())?{date:null}:{date:i,iso:i.toISOString()}}function $t(e){const t=e.enclosure;if(t?.url&&(!t.type||t.type.startsWith("image/")))return t.url;const r=e["media:content"];if(r){if(Array.isArray(r)){const a=r.find(l=>l.$?.url)?.$?.url||r.find(l=>l.url)?.url;if(a)return a}else if(typeof r=="object"){const a=r?.$?.url||r?.url;if(a)return a}}const n=e["content:encoded"],i=We(n);if(i)return i;const s=We(e.content);if(s)return s;const o=e.image;return o||null}function Xe(e){return e?String(e).replace(/<[^>]*>/g," "):""}function we(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function er(e,t){if(!e)return"";let r=e;const i=t?(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t):"",s=[/(?:^|\s)(?:The\s+post|This\s+article)[^.\n]*\bappeared\s+first\s+on\b[^.\n]*[.\n]?/gi,/(?:^|\s)Originally\s+published\s+(?:on|in)[^.\n]*[.\n]?/gi,/(?:^|\s)(?:El|La|Esta|Este)\s+(?:art[íi]culo|entrada|publicaci[óo]n|post)[^.\n]*\b(?:se\s+public[óo]|publicado|publicada)\s+(?:primero|originalmente)\s+en\b[^.\n]*[.\n]?/gi,/(?:^|\s)apareci[óo]\s+primero\s+en\b[^.\n]*[.\n]?/gi];i&&s.push(new RegExp(`(?:^|\\s)(?:apareci[óo]\\s+primero\\s+en|se\\s+public[óo]\\s+(?:primero|originalmente)\\s+en|appeared\\s+first\\s+on)\\s+${i}[^.\\n]*[.\\n]?`,"gi"));for(const o of s)r=r.replace(o," ");return r.replace(/\s+/g," ").trim()}const tr=Be.fallbackLabel,st=(Be.categories||[]).map(e=>({name:e.name,aliases:e.aliases||[],keywords:(e.keywords||[]).map(t=>t)})),rr=(()=>{const e={};for(const t of st){const r=we(t.name);e[r]=t.name;for(const n of t.aliases||[])e[we(n)]=t.name}return e})();function ar(e){const t=we(e),r=[];for(const s of st){let o=0;for(const a of s.keywords)if(typeof a=="string"){const l=we(a),v=new RegExp(`\\b${l.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\$&")}\\b`,"g");o+=(t.match(v)||[]).length}else o+=(t.match(a)||[]).length;o>0&&r.push({name:s.name,score:o})}if(!r.length)return[];r.sort((s,o)=>o.score-s.score);const n=r[0].score;return r.filter(s=>s.score>=Math.max(1,Math.round(n*.6))).slice(0,3).map(s=>s.name)}function nr(e){const t=[];e.title&&t.push(Q(e.title)),e.contentSnippet&&t.push(Q(e.contentSnippet));const r=e["content:encoded"],n=Q(r);return n&&t.push(Xe(n)),e.content&&t.push(Xe(Q(e.content))),Array.isArray(e.categories)&&t.push(e.categories.map(i=>Q(i)).join(" ")),t.join(` 
 `).slice(0,4e3)}const or=4e3,sr=6500;async function ke(e,t){const r=await t(e,{headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml, text/plain, */*"}});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.text()}function ir(e){return`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`}function lr(e){return`https://cors.isomorphic-git.org/${e}`}function cr(e){return`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(e)}`}function ur(e,t){const{date:r,iso:n}=Zt(e),i=Q(e.link).trim(),s=(Q(e.title)||"(untitled)").trim(),o=Q(e.guid)||i||s+(n||""),a=e.categories?.filter(Boolean).map(u=>Q(u))||[];let l=Q(e.contentSnippet).trim()||(e.content?Q(e.content).replace(/<[^>]+>/g,"").slice(0,280):"")||"";l=er(l,t?.title);const v=$t(e),c=ar(nr(e)),m=a.map(u=>rr[we(u)]).filter(Boolean),g=Array.from(new Set([...c||[],...m])),b=g.length?g:[tr];return{id:o,title:s,link:i,date:r,dateISO:n,categories:b,image:v,summary:l,source:{title:t?.title,url:t?.link}}}async function dr(e,t){const r=Array.from(new Set(e.map(c=>c.trim()).filter(Boolean))),n=[],i=t??fetch;function s(c){try{return!new URL(c).protocol.startsWith("http")}catch{return!0}}const o=async(c,m,g)=>{let b;return await Promise.race([g(),new Promise((u,p)=>{b=setTimeout(()=>p(new Error(`${m} timeout`)),c)})]).finally(()=>clearTimeout(b))},a=r.map(async c=>{const m=Date.now();if(s(c))return n.push({url:c,message:"Invalid URL"}),[];const g=m+sr,u=(()=>{try{return new URL(c).protocol}catch{return"https:"}})()==="https:",p=[];p.push({label:"allorigins+xml+dom",run:async()=>Se(await ke(ir(c),i))}),p.push({label:"codetabs+xml+dom",run:async()=>Se(await ke(cr(c),i))}),p.push({label:"isomorphic-git+xml+dom",run:async()=>Se(await ke(lr(c),i))}),u&&p.push({label:"direct+xml+dom",run:async()=>Se(await ke(c,i))});for(const _ of p){if(Date.now()>g)break;try{const A=await o(or,_.label,_.run),q={title:Q(A.title)||void 0,link:Q(A.link)||void 0};return(A.items||[]).map(I=>ur(I,q))}catch{if(Date.now()>g)break}}return n.push({url:c,message:"Timeout / error reading feed"}),[]});return{items:(await Promise.all(a)).flat().sort((c,m)=>{const g=c.date?c.date.getTime():0;return(m.date?m.date.getTime():0)-g}),errors:n}}const fr=async({url:e,fetch:t,depends:r,data:n})=>{r("app:feeds");const i=e.searchParams.getAll("feed"),s=e.searchParams.get("feeds"),o=new Set;i.forEach(u=>o.add(u)),s&&s.split(",").forEach(u=>o.add(u.trim()));const l=Array.from(o.size?o:[]).map(u=>u.trim()).filter(u=>u.length>0),{items:v,errors:c}=await dr(l,t),m=Be.fallbackLabel,g={};for(const u of v){const p=u.categories.length?u.categories:[m];for(const _ of p){const A=_.trim()||"Uncategorized";g[A]||=[],g[A].push(u)}}const b=Object.keys(g).sort((u,p)=>u===m&&p===m?0:u===m?1:p===m?-1:u.localeCompare(p));return{items:v,byCategory:g,categories:b,errors:c,sources:l}},Vr=Object.freeze(Object.defineProperty({__proto__:null,load:fr},Symbol.toStringTag,{value:"Module"})),mr=()=>{const e=Bt;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},gr={subscribe(e){return mr().navigating.subscribe(e)}};var vr=j('<form class="feed-form"><label class="filter-label" for="feeds">Feeds (URLs):</label> <textarea id="feeds" class="filter-input feed-textarea" placeholder="https://example.com/rss, https://another.com/feed"></textarea> <div class="actions"><button class="filter-btn" type="submit">Load</button></div></form>');function pr(e,t){fe(t,!0);const r=tt();let n=z(t,"feedInput",7,""),i=z(t,"navigating",3,!1);function s(c){c.preventDefault(),r("submit",{feedInput:n()})}var o=vr(),a=R(x(o),2);Ft(a),Z(a,"rows",3);var l=R(a,2),v=x(l);S(l),S(o),Y(()=>v.disabled=i()),rt("submit",o,s),Kt(a,n),F(e,o),me()}var yr=j("<li><code> </code> </li>"),hr=j('<div class="errors"><strong>Errors reading feeds:</strong> <ul></ul></div>');function _r(e,t){fe(t,!0);let r=z(t,"errors",19,()=>[]);var n=Te(),i=be(n);{var s=o=>{var a=hr(),l=R(x(a),2);de(l,21,r,ue,(v,c)=>{var m=yr(),g=x(m),b=x(g,!0);S(g);var u=R(g);S(m),Y(()=>{$(b,f(c).url),$(u,`: ${f(c).message??""}`)}),F(v,m)}),S(l),S(a),F(o,a)};se(i,o=>{r().length&&o(s)})}F(e,n),me()}function ze(e){try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return""}}function br(e){if(!e)return"";try{const t=new Date(e),r=new Date;let n=r.getTime()-t.getTime();n<0&&(n=0);const i=Math.floor(n/1e3),s=Math.floor(i/60),o=Math.floor(s/60),a=Math.floor(o/24),l=(()=>{const v=new Date(r);v.setHours(0,0,0,0);const c=new Date(t);return c.setHours(0,0,0,0),Math.round((v.getTime()-c.getTime())/864e5)===1})();return i<60?"just now":s<60?s===1?"a minute ago":`${s} minutes ago`:o<24?o===1?"an hour ago":`${o} hours ago`:l?"yesterday":a<7?a===1?"a day ago":`${a} days ago`:t.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"}).replace(".","")}catch{return e}}var wr=j('<a class="source-pill" target="_blank" rel="noopener noreferrer"> </a>'),Sr=j('<div class="sources"><span class="filter-label">Sources:</span> <!></div>');function kr(e,t){fe(t,!0);let r=z(t,"sources",19,()=>[]);var n=Te(),i=be(n);{var s=o=>{var a=Sr(),l=R(x(a),2);de(l,17,r,ue,(v,c)=>{var m=wr(),g=x(m,!0);S(m),Y(b=>{Z(m,"href",f(c)),$(g,b)},[()=>ze(f(c))]),F(v,m)}),S(a),F(o,a)};se(i,o=>{r().length&&o(s)})}F(e,n),me()}function Er(e,t){t("toggleRandom")}function Ar(e,t){t("toggleGroup")}var xr=j("<option> </option>"),Tr=j("<option> </option>"),Cr=j("<option> </option>"),Dr=j('<nav class="filters"><div class="filters__row"><div class="filters__group filters__categories"><span class="filter-label">Categories:</span> <div class="categories-select" aria-hidden="false"><select class="filter-select" aria-label="Select category"></select></div></div> <div class="filters__group filters__sources"><span class="filter-label">Source:</span> <div class="sources-select" aria-hidden="false"><select class="filter-select" aria-label="Select source"></select></div></div> <div class="filters__group filters__date"><span class="filter-label">Date:</span> <label><span class="sr-only">Date range</span> <select class="filter-select" aria-label="Date range"><option>All</option><!></select></label></div></div> <div class="filters__row"><div class="filters__group filters__random"><button class="filter-btn" type="button" title="Random item (filter)">Random</button></div> <div class="filters__group filters__grouping"><button class="filter-btn" type="button" title="Group by category">Group</button></div></div></nav>');function Lr(e,t){fe(t,!1);let r=z(t,"categories",24,()=>[]),n=z(t,"selectedCategory",12,"All"),i=z(t,"selectedSource",12,"All"),s=z(t,"dateFilter",12,"all"),o=z(t,"days",24,()=>[]),a=z(t,"randomActive",8,!1),l=z(t,"groupByCategory",8,!1),v=z(t,"randomDisabled",8,!1),c=z(t,"groupDisabled",8,!1),m=z(t,"sourceOptions",24,()=>[]);const g=tt();Gt();var b=Dr(),u=x(b),p=x(u),_=R(x(p),2),A=x(_);Y(()=>{n(),qe(()=>{r()})}),de(A,5,r,ue,(K,N)=>{var O=xr(),oe=x(O,!0);S(O);var ee={};Y(()=>{$(oe,f(N)),ee!==(ee=f(N))&&(O.value=(O.__value=f(N))??"")}),F(K,O)}),S(A),S(_),S(p);var q=R(p,2),I=R(x(q),2),T=x(I);Y(()=>{i(),qe(()=>{m()})}),de(T,5,m,ue,(K,N)=>{var O=Tr(),oe=x(O,!0);S(O);var ee={};Y(()=>{$(oe,f(N)),ee!==(ee=f(N))&&(O.value=(O.__value=f(N))??"")}),F(K,O)}),S(T),S(I),S(q);var k=R(q,2),y=R(x(k),2),E=R(x(y),2);Y(()=>{s(),qe(()=>{o()})});var M=x(E);M.value=M.__value="all";var B=R(M);de(B,1,o,ue,(K,N)=>{var O=Cr(),oe=x(O,!0);S(O);var ee={};Y(()=>{$(oe,(f(N),he(()=>f(N).label))),ee!==(ee=(f(N),he(()=>`day:${f(N).key}`)))&&(O.value=(O.__value=(f(N),he(()=>`day:${f(N).key}`)))??"")}),F(K,O)}),S(E),S(y),S(k),S(u);var X=R(u,2),P=x(X),H=x(P);H.__click=[Er,g],S(P);var ae=R(P,2),ne=x(ae);ne.__click=[Ar,g],S(ae),S(X),S(b),Y(()=>{Z(H,"aria-pressed",a()),H.disabled=l()||v(),Z(ne,"aria-pressed",l()),ne.disabled=a()||c()}),Me(A,n),Me(T,i),Me(E,s),F(e,b),me()}Pt(["click"]);function it(e){const t=()=>{const a=getComputedStyle(e),l=parseFloat(a.rowGap||"8"),v=parseFloat(a.gridAutoRows||"8");e.querySelectorAll(".card").forEach(m=>{m.style.gridRowEnd="span 1";const g=m.getBoundingClientRect().height,b=Math.max(1,Math.ceil((g+l)/(v+l)));m.style.gridRowEnd=`span ${b}`})},r=()=>t();window.addEventListener("resize",r);const n=e.querySelectorAll("img");n.forEach(a=>{a.complete||(a.addEventListener("load",r),a.addEventListener("error",r))});const i=new ResizeObserver(()=>t()),s=()=>e.querySelectorAll(".card").forEach(a=>i.observe(a));s();const o=new MutationObserver(()=>{i.disconnect(),s(),t()});return o.observe(e,{childList:!0,subtree:!0}),queueMicrotask(t),{destroy(){window.removeEventListener("resize",r),n.forEach(a=>{a.removeEventListener("load",r),a.removeEventListener("error",r)}),i.disconnect(),o.disconnect()}}}var qr=j('<img decoding="async"/>'),Ir=j("<time> </time>"),Rr=j('<article class="card"><a class="card__image" target="_blank" rel="noopener noreferrer"><!></a> <div class="card__body"><h3 class="card__title"><a target="_blank" rel="noopener noreferrer"> </a></h3> <p class="card__summary"> </p></div> <div class="card__meta"><span class="source"> </span> <!></div></article>');function lt(e,t){fe(t,!0);let r=z(t,"index",3,0);function n(T){const k=T.currentTarget;k.style.display="none"}function i(){return t.item.source.title||ze(t.item.source.url)}var s=Rr(),o=x(s),a=x(o);{var l=T=>{var k=qr();Y(()=>{Z(k,"src",t.item.image),Z(k,"alt",t.item.title),Z(k,"loading",r()<12?"eager":"lazy")}),rt("error",k,n),Ht(k),F(T,k)};se(a,T=>{t.item.image&&T(l)})}S(o);var v=R(o,2),c=x(v),m=x(c),g=x(m,!0);S(m),S(c);var b=R(c,2),u=x(b,!0);S(b),S(v);var p=R(v,2),_=x(p),A=x(_,!0);S(_);var q=R(_,2);{var I=T=>{var k=Ir(),y=x(k,!0);S(k),Y(E=>{Z(k,"datetime",t.item.dateISO),$(y,E)},[()=>br(t.item.dateISO)]),F(T,k)};se(q,T=>{t.item.dateISO&&T(I)})}S(p),S(s),Y(T=>{Z(s,"data-index",r()),Z(o,"href",t.item.link),Z(o,"aria-label",t.item.title),Z(m,"href",t.item.link),$(g,t.item.title),$(u,t.item.summary),$(A,T)},[i]),F(e,s),me()}var Mr=j('<section class="category"><h2 class="category__title">Results</h2> <div class="gallery masonry"></div></section>');function Or(e,t){let r=z(t,"items",19,()=>[]);var n=Mr(),i=R(x(n),2);de(i,21,r,ue,(s,o,a)=>{lt(s,{get item(){return f(o)},index:a})}),S(i),nt(i,s=>it?.(s)),S(n),F(e,n)}var Fr=j('<section class="category"><h2 class="category__title"> </h2> <div class="gallery masonry"></div></section>');function Nr(e,t){fe(t,!0);let r=z(t,"categories",19,()=>[]),n=z(t,"byCategory",19,()=>({}));var i=Te(),s=be(i);de(s,17,r,ue,(o,a)=>{var l=Fr(),v=x(l),c=x(v,!0);S(v);var m=R(v,2);de(m,21,()=>n()[f(a)],ue,(g,b,u)=>{lt(g,{get item(){return f(b)},index:u})}),S(m),nt(m,g=>it?.(g)),S(l),Y(()=>$(c,f(a))),F(o,l)}),F(e,i),me()}function Ee(e){return e.source.title&&e.source.title.trim()||ze(e.source.url)||"Unknown source"}var Ur=j('<div class="grid-overlay" role="status" aria-live="polite"><div class="spinner" aria-hidden="true"></div> <span class="grid-overlay__text">Loading…</span></div>'),Br=j('<div class="empty-state" role="status" aria-live="polite"><h2 class="empty-state__title">No items loaded</h2> <p class="empty-state__msg">Paste one or more RSS feed URLs above and press <strong>Load</strong> to get started.</p></div>'),zr=j('<section class="controls"><!> <!> <!></section> <!> <!> <!>',1);function Yr(e,t){fe(t,!0);const r=()=>Ut(gr,"$navigating",n),[n,i]=Nt();let s=le(je(t.data.sources.join(", "))),o=le(je(t.data.sources.length>0||t.data.items.length>0));Ie(()=>{V(o,t.data.sources.length>0||t.data.items.length>0,!0)});let a="",l=le("All"),v=le(!1),c=le("All"),m=le("all"),g=le(!1),b=le(null);function u(d){return d.link&&String(d.link)||d.id||`${d.title}|${d.dateISO||""}`}const p=ge(()=>(()=>{let d=t.data.items;if(f(m)!=="all"){const w=f(m).slice(4),C=new Date(`${w}T00:00:00`),G=new Date(C);G.setDate(G.getDate()+1),d=d.filter(J=>{if(!J.date)return!1;const ie=J.date.getTime();return ie>=C.getTime()&&ie<G.getTime()})}f(c)!=="All"&&(d=d.filter(w=>Ee(w)===f(c)));const h=new Set;for(const w of d){const C=w.categories?.length?w.categories:["Uncategorized"];for(const G of C)h.add(G.trim()||"Uncategorized")}const D="Uncategorized",L=Array.from(h);return L.sort((w,C)=>w===D&&C===D?0:w===D?1:C===D?-1:w.localeCompare(C)),["All",...L]})());Ie(()=>{f(p).includes(f(l))||V(l,"All")});function _(){return!(!f(v)||f(l)!=="All"||a.trim()||f(m)!=="all"||f(g))}const A=ge(()=>(()=>{let d=t.data.items;if(f(m)!=="all"){const w=f(m).slice(4),C=new Date(`${w}T00:00:00`),G=new Date(C);G.setDate(G.getDate()+1),d=d.filter(J=>{if(!J.date)return!1;const ie=J.date.getTime();return ie>=C.getTime()&&ie<G.getTime()})}f(c)!=="All"&&(d=d.filter(w=>Ee(w)===f(c)));const h={};for(const w of d){const C=w.categories?.length?w.categories:["Uncategorized"];for(const G of C){const J=G.trim()||"Uncategorized";h[J]||(h[J]=[]),h[J].push(w)}}const D=Object.keys(h),L="Uncategorized";return D.sort((w,C)=>w===L&&C===L?0:w===L?1:C===L?-1:w.localeCompare(C)),{categories:D,byCategory:h}})());function q(d,h){return typeof d=="number"&&typeof h=="number"?d-h:String(d).localeCompare(String(h))}function I(){let d=t.data.items;if(f(m)!=="all"){const w=f(m).slice(4),C=new Date(`${w}T00:00:00`),G=new Date(C);G.setDate(G.getDate()+1),d=d.filter(J=>{if(!J.date)return!1;const ie=J.date.getTime();return ie>=C.getTime()&&ie<G.getTime()})}f(l)!=="All"&&(d=d.filter(w=>w.categories.includes(f(l)))),f(c)!=="All"&&(d=d.filter(w=>Ee(w)===f(c)));const h=a.trim().toLowerCase();h&&(d=d.filter(w=>{const C=(w.source.title||"")+" "+(w.source.url||"");return w.title.toLowerCase().includes(h)||(w.summary||"").toLowerCase().includes(h)||C.toLowerCase().includes(h)}));const D=-1,L=d.map(w=>({it:w,k:w.date?w.date.getTime():0}));return L.sort((w,C)=>D*q(w.k,C.k)),L.map(w=>w.it)}function T(){const d=I();return f(g)&&f(b)?d.filter(h=>u(h)===f(b)):d}function k(){const d=D=>D.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}),h=new Map;for(const D of t.data.items){if(!D.date)continue;const L=D.date.toISOString().slice(0,10);h.has(L)||h.set(L,d(D.date))}return Array.from(h.entries()).sort((D,L)=>D[0]<L[0]?1:-1).map(([D,L])=>({key:D,label:L}))}function y(d){d.preventDefault();const h=new URLSearchParams,D=f(s).split(/[\n,]/).map(L=>L.trim()).filter(Boolean);if(D.length<=3)for(const L of D)h.append("feed",L);else h.set("feeds",D.join(","));zt(`?${h.toString()}`)}function E(){const d=new Set;for(const h of t.data.items)d.add(Ee(h));return["All",...Array.from(d).sort((h,D)=>h.localeCompare(D))]}function M(){if(f(g))V(g,!1),V(b,null);else{const d=I();if(d.length===0)return;const h=Math.floor(Math.random()*d.length);V(b,u(d[h]),!0),V(g,!0)}}Ie(()=>{if(!f(g))return;const d=I();if(d.length===0){V(g,!1),V(b,null);return}if(!f(b)||!d.some(h=>u(h)===f(b))){const h=Math.floor(Math.random()*d.length);V(b,u(d[h]),!0)}});var B=zr(),X=be(B),P=x(X);{let d=ge(()=>!!r());pr(P,{get feedInput(){return f(s)},get navigating(){return f(d)},$$events:{submit:h=>{V(s,h.detail.feedInput,!0),y(new Event("submit"))}}})}var H=R(P,2);_r(H,{get errors(){return t.data.errors}});var ae=R(H,2);{var ne=d=>{kr(d,{get sources(){return t.data.sources}})};se(ae,d=>{f(o)&&d(ne)})}S(X);var K=R(X,2);{var N=d=>{{let h=ge(k),D=ge(E);Lr(d,{get categories(){return f(p)},get days(){return f(h)},get randomActive(){return f(g)},get groupByCategory(){return f(v)},get sourceOptions(){return f(D)},get selectedCategory(){return f(l)},set selectedCategory(L){V(l,L,!0)},get selectedSource(){return f(c)},set selectedSource(L){V(c,L,!0)},get dateFilter(){return f(m)},set dateFilter(L){V(m,L,!0)},$$events:{toggleRandom:M,toggleGroup:()=>V(v,!f(v))}})}};se(K,d=>{f(o)&&d(N)})}var O=R(K,2);{var oe=d=>{var h=Ur();F(d,h)};se(O,d=>{r()&&d(oe)})}var ee=R(O,2);{var ct=d=>{var h=Br();F(d,h)},ut=d=>{var h=Te(),D=be(h);{var L=C=>{Nr(C,{get categories(){return f(A).categories},get byCategory(){return f(A).byCategory}})},w=C=>{{let G=ge(T);Or(C,{get items(){return f(G)}})}};se(D,C=>{_()?C(L):C(w,!1)},!0)}F(d,h)};se(ee,d=>{t.data.items.length===0?d(ct):d(ut,!1)})}F(e,B),me(),i()}export{Yr as component,Vr as universal};
