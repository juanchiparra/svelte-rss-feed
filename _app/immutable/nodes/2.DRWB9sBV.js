import"../chunks/DsnmJJEf.js";import{A as xe,h as se,ag as mt,C as Ye,x as vt,w as gt,f as m,W as pt,y as yt,H as ht,z as ze,B as Te,K as ge,ah as _t,al as bt,D as Oe,G as wt,F as me,ap as Qe,ad as Je,Q as St,aK as Pe,aL as He,I as Ze,J as kt,aM as ke,aN as Ce,aO as $e,aP as Ee,aQ as Et,aj as At,aR as xt,ao as Tt,aS as Ct,Y as Lt,a9 as Dt,aT as et,aU as It,aF as tt,d as he,aV as rt,aW as qt,aX as Rt,M as Mt,aE as Ot,aG as Ft,aY as Nt,p as ue,l as G,t as K,n as O,o as de,v as D,q as A,aZ as Bt,s as w,a6 as Ae,m as be,a_ as Le,aH as oe,X as Ge,b as je,R as Y,aI as fe}from"../chunks/BEcdxAbO.js";import{p as z,i as ne,s as Ut,a as zt}from"../chunks/ByTpGWCj.js";import{s as Pt,g as Ht}from"../chunks/HiaYsKDF.js";import{c as at,e as nt,s as J,d as Gt,r as jt}from"../chunks/Cu1k3PKI.js";import{s as Q}from"../chunks/CZhqOxrB.js";import{i as Wt}from"../chunks/CCaxT0op.js";function ie(e,t){return t}function Xt(e,t,r){for(var n=e.items,i=[],s=t.length,o=0;o<s;o++)xt(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var c=r.parentNode;Tt(c),c.append(r),n.clear(),$(e,t[0].prev,t[s-1].next)}Ct(i,()=>{for(var g=0;g<s;g++){var u=t[g];a||(n.delete(u.k),$(e,u.prev,u.next)),$e(u.e,!a)}})}function le(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},c=(t&et)!==0;if(c){var g=e;o=se?xe(mt(g)):g.appendChild(Ye())}se&&vt();var u=null,f=!1,v=new Map,h=pt(()=>{var E=r();return Je(E)?E:E==null?[]:Qe(E)}),l,p;function _(){Kt(p,l,a,v,o,i,t,n,r),s!==null&&(l.length===0?u?Ze(u):u=Oe(()=>s(o)):u!==null&&kt(u,()=>{u=null}))}gt(()=>{p??=Lt,l=m(h);var E=l.length;if(f&&E===0)return;f=E===0;let C=!1;if(se){var I=yt(o)===ht;I!==(E===0)&&(o=ze(),xe(o),Te(!1),C=!0)}if(se){for(var x=null,S,y=0;y<E;y++){if(ge.nodeType===_t&&ge.data===bt){o=ge,C=!0,Te(!1);break}var k=l[y],R=n(k,y);S=Fe(ge,a,x,null,k,R,y,i,t,r),a.items.set(R,S),x=S}E>0&&xe(ze())}if(se)E===0&&s&&(u=Oe(()=>s(o)));else if(wt()){var U=new Set,W=me;for(y=0;y<E;y+=1){k=l[y],R=n(k,y);var P=a.items.get(R)??v.get(R);P?(t&(Ee|ke))!==0&&ot(P,k,y,t):(S=Fe(null,a,null,null,k,R,y,i,t,r,!0),v.set(R,S)),U.add(R)}for(const[H,te]of a.items)U.has(H)||W.skipped_effects.add(te.e);W.add_callback(_)}else _();C&&Te(!0),m(h)}),se&&(o=ge)}function Kt(e,t,r,n,i,s,o,a,c){var g=(o&It)!==0,u=(o&(Ee|ke))!==0,f=t.length,v=r.items,h=r.first,l=h,p,_=null,E,C=[],I=[],x,S,y,k;if(g)for(k=0;k<f;k+=1)x=t[k],S=a(x,k),y=v.get(S),y!==void 0&&(y.a?.measure(),(E??=new Set).add(y));for(k=0;k<f;k+=1){if(x=t[k],S=a(x,k),y=v.get(S),y===void 0){var R=n.get(S);if(R!==void 0){n.delete(S),v.set(S,R);var U=_?_.next:l;$(r,_,R),$(r,R,U),De(R,U,i),_=R}else{var W=l?l.e.nodes_start:i;_=Fe(W,r,_,_===null?r.first:_.next,x,S,k,s,o,c)}v.set(S,_),C=[],I=[],l=_.next;continue}if(u&&ot(y,x,k,o),(y.e.f&Ce)!==0&&(Ze(y.e),g&&(y.a?.unfix(),(E??=new Set).delete(y))),y!==l){if(p!==void 0&&p.has(y)){if(C.length<I.length){var P=I[0],H;_=P.prev;var te=C[0],re=C[C.length-1];for(H=0;H<C.length;H+=1)De(C[H],P,i);for(H=0;H<I.length;H+=1)p.delete(I[H]);$(r,te.prev,re.next),$(r,_,te),$(r,re,P),l=P,_=re,k-=1,C=[],I=[]}else p.delete(y),De(y,l,i),$(r,y.prev,y.next),$(r,y,_===null?r.first:_.next),$(r,_,y),_=y;continue}for(C=[],I=[];l!==null&&l.k!==S;)(l.e.f&Ce)===0&&(p??=new Set).add(l),I.push(l),l=l.next;if(l===null)continue;y=l}C.push(y),_=y,l=y.next}if(l!==null||p!==void 0){for(var X=p===void 0?[]:Qe(p);l!==null;)(l.e.f&Ce)===0&&X.push(l),l=l.next;var F=X.length;if(F>0){var M=(o&et)!==0&&f===0?i:null;if(g){for(k=0;k<F;k+=1)X[k].a?.measure();for(k=0;k<F;k+=1)X[k].a?.fix()}Xt(r,X,M)}}g&&Dt(()=>{if(E!==void 0)for(y of E)y.a?.apply()}),e.first=r.first&&r.first.e,e.last=_&&_.e;for(var ae of n.values())$e(ae.e);n.clear()}function ot(e,t,r,n){(n&Ee)!==0&&He(e.v,t),(n&ke)!==0?He(e.i,r):e.i=r}function Fe(e,t,r,n,i,s,o,a,c,g,u){var f=(c&Ee)!==0,v=(c&Et)===0,h=f?v?St(i,!1,!1):Pe(i):i,l=(c&ke)===0?o:Pe(o),p={i:l,v:h,k:s,a:null,e:null,prev:r,next:n};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Ye())}return p.e=Oe(()=>a(e,h,l,g),se),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?u||(t.first=p):(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function De(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==null&&s!==n;){var o=At(s);i.before(s),s=o}}function $(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function st(e,t,r){tt(()=>{var n=he(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}function it(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Je(t))return qt();for(var n of e.options)n.selected=t.includes(_e(n));return}for(n of e.options){var i=_e(n);if(Rt(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Vt(e){var t=new MutationObserver(()=>{it(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Mt(()=>{t.disconnect()})}function Ie(e,t,r=t){var n=!0;rt(e,"change",i=>{var s=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),_e);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");o=a&&_e(a)}r(o)}),tt(()=>{var i=t();if(it(e,i,n),n&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=_e(s),r(i))}e.__value=i,n=!1}),Vt(e)}function _e(e){return"__value"in e?e.__value:e.value}function Yt(e,t,r=t){var n=new WeakSet;rt(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=qe(e)?Re(s):s,r(s),me!==null&&n.add(me),await Ot(),s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),(se&&e.defaultValue!==e.value||he(t)==null&&e.value)&&(r(qe(e)?Re(e.value):e.value),me!==null&&n.add(me)),Ft(()=>{var i=t();if(e===document.activeElement){var s=Nt??me;if(n.has(s))return}qe(e)&&i===Re(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function qe(e){var t=e.type;return t==="number"||t==="range"}function Re(e){return e===""?null:+e}function j(e){return(e?.textContent||"").trim()}function ee(e,t){const r=e?.getAttribute(t);return r??void 0}function B(e,t){const r=e.getElementsByTagNameNS?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t);return r&&r.length?r[0]:null}function ve(e,t){const r=e.getElementsByTagNameNS?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t);return Array.from(r)}function Qt(e){const t=e.querySelector("rss > channel, rdf\\:RDF > channel, channel")||B(e,"channel");if(!t)return null;const r=j(B(t,"title")||t.querySelector("title")),n=B(t,"link")||t.querySelector("link[href], link"),i=ee(n,"href")||j(n),s=[],o=ve(t,"item");return(o.length?o:Array.from(t.querySelectorAll("item"))).forEach(a=>{const c=j(B(a,"title")||a.querySelector("title")),g=B(a,"link")||a.querySelector("link[href], link"),u=ee(g,"href")||j(g),f=j(B(a,"guid")||a.querySelector("guid")),v=j(B(a,"pubDate")||a.querySelector("pubDate"))||j(B(a,"date")||a.querySelector("dc\\:date, date")),h=B(a,"encoded")||a.querySelector("content\\:encoded"),l=h?h.textContent||"":void 0,p=j(B(a,"description")||a.querySelector("description")),_=B(a,"enclosure")||a.querySelector("enclosure"),E=_?{url:ee(_,"url"),type:ee(_,"type")}:void 0,C=[],I=ve(a,"category"),x=(I.length?I:Array.from(a.querySelectorAll("category"))).map(S=>j(S)).filter(Boolean);s.push({title:c,link:u,guid:f,pubDate:v,description:p,content:p,"content:encoded":l,"media:content":C,enclosure:E,categories:x})}),{title:r,link:i,items:s}}function Jt(e){const t=B(e,"feed")||e.querySelector("feed");if(!t)return null;const r=j(B(t,"title")||t.querySelector("title"));let n;const i=ve(t,"link"),s=i.length?i:Array.from(t.querySelectorAll("link[href]"));for(const c of s){const g=(c.getAttribute("rel")||"alternate").toLowerCase(),u=ee(c,"href");if(u&&(g==="alternate"||!n)&&(n=u,g==="alternate"))break}const o=[],a=ve(t,"entry");return(a.length?a:Array.from(t.querySelectorAll("entry"))).forEach(c=>{const g=j(B(c,"title")||c.querySelector("title"));let u;const f=ve(c,"link"),v=f.length?f:Array.from(c.querySelectorAll("link[href]"));for(const U of v){const W=(U.getAttribute("rel")||"alternate").toLowerCase(),P=ee(U,"href");if(P&&(W==="alternate"||!u)&&(u=P,W==="alternate"))break}const h=j(B(c,"id")||c.querySelector("id")),l=j(B(c,"published")||c.querySelector("published")),p=j(B(c,"updated")||c.querySelector("updated")),_=B(c,"content")||c.querySelector("content"),E=ee(_,"type")||"text",C=_&&_.textContent||"",I=j(B(c,"summary")||c.querySelector("summary")),x=v.find(U=>(U.getAttribute("rel")||"").toLowerCase()==="enclosure"),S=x?{url:ee(x,"href"),type:ee(x,"type")}:void 0,y=[],k=ve(c,"category"),R=(k.length?k:Array.from(c.querySelectorAll("category"))).map(U=>ee(U,"term")||j(U)).filter(Boolean);o.push({title:g,link:u,guid:h,isoDate:p||l||void 0,content:I,"content:encoded":E.includes("html")?C:void 0,"media:content":y,enclosure:S,categories:R})}),{title:r,link:n,items:o}}function pe(e){const r=new DOMParser().parseFromString(e,"application/xml");if(r.querySelector("parsererror"))throw new Error("Invalid XML");return Qt(r)||Jt(r)||{title:void 0,link:void 0,items:[]}}const Zt="Uncategorized",$t=[{name:"Politics",aliases:["politics","government","state","assembly","congress","parliament","politica","gobierno","estado","asamblea","congreso","parlamento"],keywords:["politica","gobierno","eleccion","elecciones","ministro","ministra","presidente","presidenta","partido","parlamento","congreso","alcalde","alcaldesa","diputado","senado","decreto","cne","tsj","constitucion","ley","mandato","gobernador","gobernadora"]},{name:"Economy",aliases:["economy","business","finance","markets","economia","negocios","finanzas","mercados"],keywords:["economia","inflacion","dolar","bolivar","banco","finanzas","mercado","precio","salario","impuesto","negocio","empresa","petroleo","exportacion","importacion","pib","credito","devaluacion","divisas","bcv","bono"]},{name:"Sports",aliases:["sports","sport","deporte"],keywords:["futbol","futbolista","gol","liga","beisbol","beisbolista","baloncesto","tenis","nba","mlb","mundial","partido","marcador","seleccion","vinotinto","olimpico","olimpiadas"]},{name:"Technology",aliases:["technology","tech","tecnologia"],keywords:["tecnologia","software","aplicacion","app","ia","inteligencia artificial","ciberseguridad","internet","redes sociales","google","apple","microsoft","android","ios","startup","algoritmo","programacion","nube","cloud","chip","semiconductor"]},{name:"Culture",aliases:["culture","arts","arte","cultural"],keywords:["cultura","arte","teatro","literatura","libro","musica","concierto","festival","cine","pelicula","exposicion","museo"]},{name:"Entertainment",aliases:["entertainment","showbiz","espectaculos","farándula","farandula"],keywords:["farandula","famoso","celebridad","espectaculo","television","serie","streaming","netflix","hollywood","premios","reality"]},{name:"Health",aliases:["health","wellness","salud","bienestar"],keywords:["salud","covid","coronavirus","hospital","medico","medicina","vacuna","oms","enfermedad","clinica","epidemia","pandemia"]},{name:"International",aliases:["world","global","mundo","internacional"],keywords:["eeuu","estados unidos","onu","europa","rusia","china","ucrania","conflicto","guerra","frontera","internacional","diplomacia","geopolitica"]},{name:"Society",aliases:["society","community","social","comunidad","país","pais"],keywords:["comunidad","educacion","escuela","universidad","transporte","servicios","protesta","ciudadania","barrio","familia","trabajo","empleo"]},{name:"Crime",aliases:["crime","crimen","public safety","security","police","seguridad","policiales"],keywords:["accidente","homicidio","robo","incendio","policia","tribunal","fiscalia","delito","crimen","detenido","carcel","secuestro"]},{name:"Opinion",aliases:["opinion","editorial","columns","columnas"],keywords:["opinion","editorial","columna","analisis","tribuna","ensayo"]},{name:"Weather",aliases:["weather","forecast","tiempo"],keywords:["clima","lluvia","tormenta","huracan","temperatura","sequia","alerta meteorologica"]},{name:"Science",aliases:["science","scientific","cientifica"],keywords:["ciencia","investigacion","estudio","cientifico","espacio","nasa","astronomia"]},{name:"Food",aliases:["food","dining","cuisine","gastronomia","comida","cocina"],keywords:["gastronomia","restaurante","receta","cocina","chef","comida","bebida"]}],Ne={fallbackLabel:Zt,categories:$t};function V(e){if(e==null)return"";if(typeof e=="string")return e;if(Array.isArray(e))return V(e[0]);if(typeof e=="object"){if(typeof e._=="string")return e._;if(typeof e["#text"]=="string")return e["#text"];if(typeof e.href=="string")return e.href;if(e.$&&typeof e.$.href=="string")return e.$.href;if(e.$&&typeof e.$.url=="string")return e.$.url;if(typeof e.url=="string")return e.url}try{return String(e)}catch{return""}}function We(e){if(!e)return null;const t=e.match(/<img\s+[^>]*src=["']([^"']+)["'][^>]*>/i);return t?t[1]:null}function er(e){const t=e.isoDate,r=e.pubDate,n=t||r;if(!n)return{date:null};const i=new Date(n);return isNaN(i.getTime())?{date:null}:{date:i,iso:i.toISOString()}}function tr(e){const t=e.enclosure;if(t?.url&&(!t.type||t.type.startsWith("image/")))return t.url;const r=e["media:content"];if(r){if(Array.isArray(r)){const a=r.find(c=>c.$?.url)?.$?.url||r.find(c=>c.url)?.url;if(a)return a}else if(typeof r=="object"){const a=r?.$?.url||r?.url;if(a)return a}}const n=e["content:encoded"],i=We(n);if(i)return i;const s=We(e.content);if(s)return s;const o=e.image;return o||null}function Xe(e){return e?String(e).replace(/<[^>]*>/g," "):""}function we(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function rr(e,t){if(!e)return"";let r=e;const i=t?(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t):"",s=[/(?:^|\s)(?:The\s+post|This\s+article)[^.\n]*\bappeared\s+first\s+on\b[^.\n]*[.\n]?/gi,/(?:^|\s)Originally\s+published\s+(?:on|in)[^.\n]*[.\n]?/gi,/(?:^|\s)(?:El|La|Esta|Este)\s+(?:art[íi]culo|entrada|publicaci[óo]n|post)[^.\n]*\b(?:se\s+public[óo]|publicado|publicada)\s+(?:primero|originalmente)\s+en\b[^.\n]*[.\n]?/gi,/(?:^|\s)apareci[óo]\s+primero\s+en\b[^.\n]*[.\n]?/gi];i&&s.push(new RegExp(`(?:^|\\s)(?:apareci[óo]\\s+primero\\s+en|se\\s+public[óo]\\s+(?:primero|originalmente)\\s+en|appeared\\s+first\\s+on)\\s+${i}[^.\\n]*[.\\n]?`,"gi"));for(const o of s)r=r.replace(o," ");return r.replace(/\s+/g," ").trim()}const ar=Ne.fallbackLabel,lt=(Ne.categories||[]).map(e=>({name:e.name,aliases:e.aliases||[],keywords:(e.keywords||[]).map(t=>t)})),nr=(()=>{const e={};for(const t of lt){const r=we(t.name);e[r]=t.name;for(const n of t.aliases||[])e[we(n)]=t.name}return e})();function or(e){const t=we(e),r=[];for(const s of lt){let o=0;for(const a of s.keywords)if(typeof a=="string"){const c=we(a),g=new RegExp(`\\b${c.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\$&")}\\b`,"g");o+=(t.match(g)||[]).length}else o+=(t.match(a)||[]).length;o>0&&r.push({name:s.name,score:o})}if(!r.length)return[];r.sort((s,o)=>o.score-s.score);const n=r[0].score;return r.filter(s=>s.score>=Math.max(1,Math.round(n*.6))).slice(0,3).map(s=>s.name)}function sr(e){const t=[];e.title&&t.push(V(e.title)),e.contentSnippet&&t.push(V(e.contentSnippet));const r=e["content:encoded"],n=V(r);return n&&t.push(Xe(n)),e.content&&t.push(Xe(V(e.content))),Array.isArray(e.categories)&&t.push(e.categories.map(i=>V(i)).join(" ")),t.join(` 
 `).slice(0,4e3)}const ir=4e3,lr=6500;async function ye(e,t){const r=await t(e,{headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml, text/plain, */*"}});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.text()}function Ke(e){try{const t=new URL(e);return t.protocol="http:",t.toString()}catch{return e}}function Ve(e){return`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`}function cr(e){return`https://cors.isomorphic-git.org/${encodeURIComponent(e)}`}function ur(e,t){const{date:r,iso:n}=er(e),i=V(e.link).trim(),s=(V(e.title)||"(untitled)").trim(),o=V(e.guid)||i||s+(n||""),a=e.categories?.filter(Boolean).map(l=>V(l))||[];let c=V(e.contentSnippet).trim()||(e.content?V(e.content).replace(/<[^>]+>/g,"").slice(0,280):"")||"";c=rr(c,t?.title);const g=tr(e),u=or(sr(e)),f=a.map(l=>nr[we(l)]).filter(Boolean),v=Array.from(new Set([...u||[],...f])),h=v.length?v:[ar];return{id:o,title:s,link:i,date:r,dateISO:n,categories:h,image:g,summary:c,source:{title:t?.title,url:t?.link}}}async function dr(e,t){const r=Array.from(new Set(e.map(u=>u.trim()).filter(Boolean))),n=[],i=t??fetch;function s(u){try{return!new URL(u).protocol.startsWith("http")}catch{return!0}}const o=async(u,f,v)=>{let h;return await Promise.race([v(),new Promise((l,p)=>{h=setTimeout(()=>p(new Error(`${f} timeout`)),u)})]).finally(()=>clearTimeout(h))},a=r.map(async u=>{const f=Date.now();if(s(u))return n.push({url:u,message:"Invalid URL"}),[];const v=f+lr,h=[{label:"direct+xml+dom",run:async()=>pe(await ye(u,i))},{label:"proxy+dom",run:async()=>pe(await ye(Ve(u),i))},{label:"http+xml+dom",run:async()=>pe(await ye(Ke(u),i))},{label:"proxy+http+dom",run:async()=>pe(await ye(Ve(Ke(u)),i))},{label:"corsAnywhere+dom",run:async()=>pe(await ye(cr(u),i))}];for(const l of h){if(Date.now()>v)break;try{const p=await o(ir,l.label,l.run),_={title:V(p.title)||void 0,link:V(p.link)||void 0};return(p.items||[]).map(E=>ur(E,_))}catch{if(Date.now()>v)break}}return n.push({url:u,message:"Timeout / error reading feed"}),[]});return{items:(await Promise.all(a)).flat().sort((u,f)=>{const v=u.date?u.date.getTime():0;return(f.date?f.date.getTime():0)-v}),errors:n}}const fr=async({url:e,fetch:t,depends:r,data:n})=>{r("app:feeds");const i=e.searchParams.getAll("feed"),s=e.searchParams.get("feeds"),o=new Set;i.forEach(l=>o.add(l)),s&&s.split(",").forEach(l=>o.add(l.trim()));const c=Array.from(o.size?o:[]).map(l=>l.trim()).filter(l=>l.length>0),{items:g,errors:u}=await dr(c,t),f=Ne.fallbackLabel,v={};for(const l of g){const p=l.categories.length?l.categories:[f];for(const _ of p){const E=_.trim()||"Uncategorized";v[E]||=[],v[E].push(l)}}const h=Object.keys(v).sort((l,p)=>l===f&&p===f?0:l===f?1:p===f?-1:l.localeCompare(p));return{items:g,byCategory:v,categories:h,errors:u,sources:c}},Vr=Object.freeze(Object.defineProperty({__proto__:null,load:fr},Symbol.toStringTag,{value:"Module"})),mr=()=>{const e=Pt;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},vr={subscribe(e){return mr().navigating.subscribe(e)}};var gr=G('<form class="feed-form"><label class="filter-label" for="feeds">Feeds (URLs):</label> <textarea id="feeds" class="filter-input feed-textarea" placeholder="https://example.com/rss, https://another.com/feed"></textarea> <div class="actions"><button class="filter-btn" type="submit">Load</button></div></form>');function pr(e,t){ue(t,!0);const r=at();let n=z(t,"feedInput",7,""),i=z(t,"navigating",3,!1);function s(u){u.preventDefault(),r("submit",{feedInput:n()})}var o=gr(),a=D(A(o),2);Bt(a),Q(a,"rows",3);var c=D(a,2),g=A(c);w(c),w(o),K(()=>g.disabled=i()),nt("submit",o,s),Yt(a,n),O(e,o),de()}var yr=G("<li><code> </code> </li>"),hr=G('<div class="errors"><strong>Errors reading feeds:</strong> <ul></ul></div>');function _r(e,t){ue(t,!0);let r=z(t,"errors",19,()=>[]);var n=Ae(),i=be(n);{var s=o=>{var a=hr(),c=D(A(a),2);le(c,21,r,ie,(g,u)=>{var f=yr(),v=A(f),h=A(v,!0);w(v);var l=D(v);w(f),K(()=>{J(h,m(u).url),J(l,`: ${m(u).message??""}`)}),O(g,f)}),w(c),w(a),O(o,a)};ne(i,o=>{r().length&&o(s)})}O(e,n),de()}function Be(e){try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return""}}function br(e){if(!e)return"";try{const t=new Date(e),r=new Date;let n=r.getTime()-t.getTime();n<0&&(n=0);const i=Math.floor(n/1e3),s=Math.floor(i/60),o=Math.floor(s/60),a=Math.floor(o/24),c=(()=>{const g=new Date(r);g.setHours(0,0,0,0);const u=new Date(t);return u.setHours(0,0,0,0),Math.round((g.getTime()-u.getTime())/864e5)===1})();return i<60?"just now":s<60?s===1?"a minute ago":`${s} minutes ago`:o<24?o===1?"an hour ago":`${o} hours ago`:c?"yesterday":a<7?a===1?"a day ago":`${a} days ago`:t.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"}).replace(".","")}catch{return e}}var wr=G('<a class="source-pill" target="_blank" rel="noopener noreferrer"> </a>'),Sr=G('<div class="sources"><span class="filter-label">Sources:</span> <!></div>');function kr(e,t){ue(t,!0);let r=z(t,"sources",19,()=>[]);var n=Ae(),i=be(n);{var s=o=>{var a=Sr(),c=D(A(a),2);le(c,17,r,ie,(g,u)=>{var f=wr(),v=A(f,!0);w(f),K(h=>{Q(f,"href",m(u)),J(v,h)},[()=>Be(m(u))]),O(g,f)}),w(a),O(o,a)};ne(i,o=>{r().length&&o(s)})}O(e,n),de()}function Er(e,t){t("toggleRandom")}function Ar(e,t){t("toggleGroup")}var xr=G("<option> </option>"),Tr=G("<option> </option>"),Cr=G("<option> </option>"),Lr=G('<nav class="filters"><div class="filters__row"><div class="filters__group filters__categories"><span class="filter-label">Categories:</span> <div class="categories-select" aria-hidden="false"><select class="filter-select" aria-label="Select category"></select></div></div> <div class="filters__group filters__sources"><span class="filter-label">Source:</span> <div class="sources-select" aria-hidden="false"><select class="filter-select" aria-label="Select source"></select></div></div> <div class="filters__group filters__date"><span class="filter-label">Date:</span> <label><span class="sr-only">Date range</span> <select class="filter-select" aria-label="Date range"><option>All</option><!></select></label></div></div> <div class="filters__row"><div class="filters__group filters__random"><button class="filter-btn" type="button" title="Random item (filter)">Random</button></div> <div class="filters__group filters__grouping"><button class="filter-btn" type="button" title="Group by category">Group</button></div></div></nav>');function Dr(e,t){ue(t,!1);let r=z(t,"categories",24,()=>[]),n=z(t,"selectedCategory",12,"All"),i=z(t,"selectedSource",12,"All"),s=z(t,"dateFilter",12,"all"),o=z(t,"days",24,()=>[]),a=z(t,"randomActive",8,!1),c=z(t,"groupByCategory",8,!1),g=z(t,"randomDisabled",8,!1),u=z(t,"groupDisabled",8,!1),f=z(t,"sourceOptions",24,()=>[]);const v=at();Wt();var h=Lr(),l=A(h),p=A(l),_=D(A(p),2),E=A(_);K(()=>{n(),Le(()=>{r()})}),le(E,5,r,ie,(X,F)=>{var M=xr(),ae=A(M,!0);w(M);var Z={};K(()=>{J(ae,m(F)),Z!==(Z=m(F))&&(M.value=(M.__value=m(F))??"")}),O(X,M)}),w(E),w(_),w(p);var C=D(p,2),I=D(A(C),2),x=A(I);K(()=>{i(),Le(()=>{f()})}),le(x,5,f,ie,(X,F)=>{var M=Tr(),ae=A(M,!0);w(M);var Z={};K(()=>{J(ae,m(F)),Z!==(Z=m(F))&&(M.value=(M.__value=m(F))??"")}),O(X,M)}),w(x),w(I),w(C);var S=D(C,2),y=D(A(S),2),k=D(A(y),2);K(()=>{s(),Le(()=>{o()})});var R=A(k);R.value=R.__value="all";var U=D(R);le(U,1,o,ie,(X,F)=>{var M=Cr(),ae=A(M,!0);w(M);var Z={};K(()=>{J(ae,(m(F),he(()=>m(F).label))),Z!==(Z=(m(F),he(()=>`day:${m(F).key}`)))&&(M.value=(M.__value=(m(F),he(()=>`day:${m(F).key}`)))??"")}),O(X,M)}),w(k),w(y),w(S),w(l);var W=D(l,2),P=A(W),H=A(P);H.__click=[Er,v],w(P);var te=D(P,2),re=A(te);re.__click=[Ar,v],w(te),w(W),w(h),K(()=>{Q(H,"aria-pressed",a()),H.disabled=c()||g(),Q(re,"aria-pressed",c()),re.disabled=a()||u()}),Ie(E,n),Ie(x,i),Ie(k,s),O(e,h),de()}Gt(["click"]);function ct(e){const t=()=>{const a=getComputedStyle(e),c=parseFloat(a.rowGap||"8"),g=parseFloat(a.gridAutoRows||"8");e.querySelectorAll(".card").forEach(f=>{f.style.gridRowEnd="span 1";const v=f.getBoundingClientRect().height,h=Math.max(1,Math.ceil((v+c)/(g+c)));f.style.gridRowEnd=`span ${h}`})},r=()=>t();window.addEventListener("resize",r);const n=e.querySelectorAll("img");n.forEach(a=>{a.complete||(a.addEventListener("load",r),a.addEventListener("error",r))});const i=new ResizeObserver(()=>t()),s=()=>e.querySelectorAll(".card").forEach(a=>i.observe(a));s();const o=new MutationObserver(()=>{i.disconnect(),s(),t()});return o.observe(e,{childList:!0,subtree:!0}),queueMicrotask(t),{destroy(){window.removeEventListener("resize",r),n.forEach(a=>{a.removeEventListener("load",r),a.removeEventListener("error",r)}),i.disconnect(),o.disconnect()}}}var Ir=G('<img decoding="async"/>'),qr=G("<time> </time>"),Rr=G('<article class="card"><a class="card__image" target="_blank" rel="noopener noreferrer"><!></a> <div class="card__body"><h3 class="card__title"><a target="_blank" rel="noopener noreferrer"> </a></h3> <p class="card__summary"> </p></div> <div class="card__meta"><span class="source"> </span> <!></div></article>');function ut(e,t){ue(t,!0);let r=z(t,"index",3,0);function n(x){const S=x.currentTarget;S.style.display="none"}function i(){return t.item.source.title||Be(t.item.source.url)}var s=Rr(),o=A(s),a=A(o);{var c=x=>{var S=Ir();K(()=>{Q(S,"src",t.item.image),Q(S,"alt",t.item.title),Q(S,"loading",r()<12?"eager":"lazy")}),nt("error",S,n),jt(S),O(x,S)};ne(a,x=>{t.item.image&&x(c)})}w(o);var g=D(o,2),u=A(g),f=A(u),v=A(f,!0);w(f),w(u);var h=D(u,2),l=A(h,!0);w(h),w(g);var p=D(g,2),_=A(p),E=A(_,!0);w(_);var C=D(_,2);{var I=x=>{var S=qr(),y=A(S,!0);w(S),K(k=>{Q(S,"datetime",t.item.dateISO),J(y,k)},[()=>br(t.item.dateISO)]),O(x,S)};ne(C,x=>{t.item.dateISO&&x(I)})}w(p),w(s),K(x=>{Q(s,"data-index",r()),Q(o,"href",t.item.link),Q(o,"aria-label",t.item.title),Q(f,"href",t.item.link),J(v,t.item.title),J(l,t.item.summary),J(E,x)},[i]),O(e,s),de()}var Mr=G('<section class="category"><h2 class="category__title">Results</h2> <div class="gallery masonry"></div></section>');function Or(e,t){let r=z(t,"items",19,()=>[]);var n=Mr(),i=D(A(n),2);le(i,21,r,ie,(s,o,a)=>{ut(s,{get item(){return m(o)},index:a})}),w(i),st(i,s=>ct?.(s)),w(n),O(e,n)}var Fr=G('<section class="category"><h2 class="category__title"> </h2> <div class="gallery masonry"></div></section>');function Nr(e,t){ue(t,!0);let r=z(t,"categories",19,()=>[]),n=z(t,"byCategory",19,()=>({}));var i=Ae(),s=be(i);le(s,17,r,ie,(o,a)=>{var c=Fr(),g=A(c),u=A(g,!0);w(g);var f=D(g,2);le(f,21,()=>n()[m(a)],ie,(v,h,l)=>{ut(v,{get item(){return m(h)},index:l})}),w(f),st(f,v=>ct?.(v)),w(c),K(()=>J(u,m(a))),O(o,c)}),O(e,i),de()}function Me(e){return e.source.title&&e.source.title.trim()||Be(e.source.url)||"Unknown source"}var Br=G('<div class="grid-overlay" role="status" aria-live="polite"><div class="spinner" aria-hidden="true"></div> <span class="grid-overlay__text">Loading…</span></div>'),Ur=G('<div class="empty-state" role="status" aria-live="polite"><h2 class="empty-state__title">No items loaded</h2> <p class="empty-state__msg">Paste one or more RSS feed URLs above and press <strong>Load</strong> to get started.</p></div>'),zr=G('<section class="controls"><!> <!> <!></section> <!> <!> <!>',1);function Yr(e,t){ue(t,!0);const r=()=>zt(vr,"$navigating",n),[n,i]=Ut();let s=oe(Ge(t.data.sources.join(", "))),o=oe(Ge(t.data.sources.length>0||t.data.items.length>0));je(()=>{Y(o,t.data.sources.length>0||t.data.items.length>0,!0)});let a="",c=oe("All"),g=oe(!1),u=oe("All"),f=oe("all"),v=oe(!1),h=oe(null);function l(d){return d.link&&String(d.link)||d.id||`${d.title}|${d.dateISO||""}`}const p=fe(()=>["All",...t.data.categories]);function _(){return!(!m(g)||m(c)!=="All"||a.trim()||m(f)!=="all"||m(v))}const E=fe(()=>(()=>{let d=t.data.items;m(u)!=="All"&&(d=d.filter(T=>Me(T)===m(u)));const b={};for(const T of d){const N=T.categories&&T.categories.length?T.categories:["Uncategorized"];for(const ce of N){const Se=ce.trim()||"Uncategorized";(b[Se]||=[]).push(T)}}const q=Object.keys(b),L="Uncategorized";return q.sort((T,N)=>T===L&&N===L?0:T===L?1:N===L?-1:T.localeCompare(N)),{categories:q,byCategory:b}})());function C(d,b){return typeof d=="number"&&typeof b=="number"?d-b:String(d).localeCompare(String(b))}function I(){let d=t.data.items;if(m(f)!=="all"){const T=m(f).slice(4),N=new Date(`${T}T00:00:00`),ce=new Date(N);ce.setDate(ce.getDate()+1),d=d.filter(Se=>{if(!Se.date)return!1;const Ue=Se.date.getTime();return Ue>=N.getTime()&&Ue<ce.getTime()})}m(c)!=="All"&&(d=d.filter(T=>T.categories.includes(m(c)))),m(u)!=="All"&&(d=d.filter(T=>Me(T)===m(u)));const b=a.trim().toLowerCase();b&&(d=d.filter(T=>{const N=(T.source.title||"")+" "+(T.source.url||"");return T.title.toLowerCase().includes(b)||(T.summary||"").toLowerCase().includes(b)||N.toLowerCase().includes(b)}));const q=-1,L=d.map(T=>({it:T,k:T.date?T.date.getTime():0}));return L.sort((T,N)=>q*C(T.k,N.k)),L.map(T=>T.it)}function x(){const d=I();return m(v)&&m(h)?d.filter(b=>l(b)===m(h)):d}function S(){const d=q=>q.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}),b=new Map;for(const q of t.data.items){if(!q.date)continue;const L=q.date.toISOString().slice(0,10);b.has(L)||b.set(L,d(q.date))}return Array.from(b.entries()).sort((q,L)=>q[0]<L[0]?1:-1).map(([q,L])=>({key:q,label:L}))}function y(d){d.preventDefault();const b=new URLSearchParams,q=m(s).split(/[\n,]/).map(L=>L.trim()).filter(Boolean);if(q.length<=3)for(const L of q)b.append("feed",L);else b.set("feeds",q.join(","));Ht(`?${b.toString()}`)}function k(){const d=new Set;for(const b of t.data.items)d.add(Me(b));return["All",...Array.from(d).sort((b,q)=>b.localeCompare(q))]}function R(){if(m(v))Y(v,!1),Y(h,null);else{const d=I();if(d.length===0)return;const b=Math.floor(Math.random()*d.length);Y(h,l(d[b]),!0),Y(v,!0)}}je(()=>{if(!m(v))return;const d=I();if(d.length===0){Y(v,!1),Y(h,null);return}if(!m(h)||!d.some(b=>l(b)===m(h))){const b=Math.floor(Math.random()*d.length);Y(h,l(d[b]),!0)}});var U=zr(),W=be(U),P=A(W);{let d=fe(()=>!!r());pr(P,{get feedInput(){return m(s)},get navigating(){return m(d)},$$events:{submit:b=>{Y(s,b.detail.feedInput,!0),y(new Event("submit"))}}})}var H=D(P,2);_r(H,{get errors(){return t.data.errors}});var te=D(H,2);{var re=d=>{kr(d,{get sources(){return t.data.sources}})};ne(te,d=>{m(o)&&d(re)})}w(W);var X=D(W,2);{var F=d=>{{let b=fe(S),q=fe(k);Dr(d,{get categories(){return m(p)},get days(){return m(b)},get randomActive(){return m(v)},get groupByCategory(){return m(g)},get sourceOptions(){return m(q)},get selectedCategory(){return m(c)},set selectedCategory(L){Y(c,L,!0)},get selectedSource(){return m(u)},set selectedSource(L){Y(u,L,!0)},get dateFilter(){return m(f)},set dateFilter(L){Y(f,L,!0)},$$events:{toggleRandom:R,toggleGroup:()=>Y(g,!m(g))}})}};ne(X,d=>{m(o)&&d(F)})}var M=D(X,2);{var ae=d=>{var b=Br();O(d,b)};ne(M,d=>{r()&&d(ae)})}var Z=D(M,2);{var dt=d=>{var b=Ur();O(d,b)},ft=d=>{var b=Ae(),q=be(b);{var L=N=>{Nr(N,{get categories(){return m(E).categories},get byCategory(){return m(E).byCategory}})},T=N=>{{let ce=fe(x);Or(N,{get items(){return m(ce)}})}};ne(q,N=>{_()?N(L):N(T,!1)},!0)}O(d,b)};ne(Z,d=>{t.data.items.length===0?d(dt):d(ft,!1)})}O(e,U),de(),i()}export{Yr as component,Vr as universal};
