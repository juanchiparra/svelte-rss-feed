import"../chunks/DsnmJJEf.js";import{A as xe,h as se,ag as dt,C as Ke,x as ft,w as mt,f as m,W as vt,y as gt,H as pt,z as ze,B as Te,K as ge,ah as yt,al as ht,D as Oe,G as _t,F as me,ap as Ve,ad as Ye,Q as bt,aK as Pe,aL as He,I as Qe,J as wt,aM as ke,aN as Ce,aO as Je,aP as Ee,aQ as St,aj as kt,aR as Et,ao as At,aS as xt,Y as Tt,a9 as Ct,aT as Ze,aU as Lt,aF as $e,d as pe,aV as et,aW as Dt,aX as qt,M as It,aE as Rt,aG as Mt,aY as Ot,p as ue,l as G,t as K,n as O,o as de,v as q,q as A,aZ as Ft,s as w,a6 as Ae,m as he,a_ as Le,aH as oe,X as Ge,b as je,R as Y,aI as fe}from"../chunks/BEcdxAbO.js";import{p as z,i as ne,s as Nt,a as Bt}from"../chunks/ByTpGWCj.js";import{s as Ut,g as zt}from"../chunks/C-WZan0P.js";import{c as tt,e as rt,s as J,d as Pt,r as Ht}from"../chunks/Cu1k3PKI.js";import{s as Q}from"../chunks/CZhqOxrB.js";import{i as Gt}from"../chunks/CCaxT0op.js";function ie(e,t){return t}function jt(e,t,r){for(var n=e.items,i=[],s=t.length,o=0;o<s;o++)Et(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var c=r.parentNode;At(c),c.append(r),n.clear(),$(e,t[0].prev,t[s-1].next)}xt(i,()=>{for(var g=0;g<s;g++){var u=t[g];a||(n.delete(u.k),$(e,u.prev,u.next)),Je(u.e,!a)}})}function le(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},c=(t&Ze)!==0;if(c){var g=e;o=se?xe(dt(g)):g.appendChild(Ke())}se&&ft();var u=null,f=!1,v=new Map,_=vt(()=>{var E=r();return Ye(E)?E:E==null?[]:Ve(E)}),l,p;function h(){Wt(p,l,a,v,o,i,t,n,r),s!==null&&(l.length===0?u?Qe(u):u=Oe(()=>s(o)):u!==null&&wt(u,()=>{u=null}))}mt(()=>{p??=Tt,l=m(_);var E=l.length;if(f&&E===0)return;f=E===0;let C=!1;if(se){var L=gt(o)===pt;L!==(E===0)&&(o=ze(),xe(o),Te(!1),C=!0)}if(se){for(var x=null,S,y=0;y<E;y++){if(ge.nodeType===yt&&ge.data===ht){o=ge,C=!0,Te(!1);break}var k=l[y],R=n(k,y);S=Fe(ge,a,x,null,k,R,y,i,t,r),a.items.set(R,S),x=S}E>0&&xe(ze())}if(se)E===0&&s&&(u=Oe(()=>s(o)));else if(_t()){var U=new Set,W=me;for(y=0;y<E;y+=1){k=l[y],R=n(k,y);var P=a.items.get(R)??v.get(R);P?(t&(Ee|ke))!==0&&at(P,k,y,t):(S=Fe(null,a,null,null,k,R,y,i,t,r,!0),v.set(R,S)),U.add(R)}for(const[H,te]of a.items)U.has(H)||W.skipped_effects.add(te.e);W.add_callback(h)}else h();C&&Te(!0),m(_)}),se&&(o=ge)}function Wt(e,t,r,n,i,s,o,a,c){var g=(o&Lt)!==0,u=(o&(Ee|ke))!==0,f=t.length,v=r.items,_=r.first,l=_,p,h=null,E,C=[],L=[],x,S,y,k;if(g)for(k=0;k<f;k+=1)x=t[k],S=a(x,k),y=v.get(S),y!==void 0&&(y.a?.measure(),(E??=new Set).add(y));for(k=0;k<f;k+=1){if(x=t[k],S=a(x,k),y=v.get(S),y===void 0){var R=n.get(S);if(R!==void 0){n.delete(S),v.set(S,R);var U=h?h.next:l;$(r,h,R),$(r,R,U),De(R,U,i),h=R}else{var W=l?l.e.nodes_start:i;h=Fe(W,r,h,h===null?r.first:h.next,x,S,k,s,o,c)}v.set(S,h),C=[],L=[],l=h.next;continue}if(u&&at(y,x,k,o),(y.e.f&Ce)!==0&&(Qe(y.e),g&&(y.a?.unfix(),(E??=new Set).delete(y))),y!==l){if(p!==void 0&&p.has(y)){if(C.length<L.length){var P=L[0],H;h=P.prev;var te=C[0],re=C[C.length-1];for(H=0;H<C.length;H+=1)De(C[H],P,i);for(H=0;H<L.length;H+=1)p.delete(L[H]);$(r,te.prev,re.next),$(r,h,te),$(r,re,P),l=P,h=re,k-=1,C=[],L=[]}else p.delete(y),De(y,l,i),$(r,y.prev,y.next),$(r,y,h===null?r.first:h.next),$(r,h,y),h=y;continue}for(C=[],L=[];l!==null&&l.k!==S;)(l.e.f&Ce)===0&&(p??=new Set).add(l),L.push(l),l=l.next;if(l===null)continue;y=l}C.push(y),h=y,l=y.next}if(l!==null||p!==void 0){for(var X=p===void 0?[]:Ve(p);l!==null;)(l.e.f&Ce)===0&&X.push(l),l=l.next;var F=X.length;if(F>0){var M=(o&Ze)!==0&&f===0?i:null;if(g){for(k=0;k<F;k+=1)X[k].a?.measure();for(k=0;k<F;k+=1)X[k].a?.fix()}jt(r,X,M)}}g&&Ct(()=>{if(E!==void 0)for(y of E)y.a?.apply()}),e.first=r.first&&r.first.e,e.last=h&&h.e;for(var ae of n.values())Je(ae.e);n.clear()}function at(e,t,r,n){(n&Ee)!==0&&He(e.v,t),(n&ke)!==0?He(e.i,r):e.i=r}function Fe(e,t,r,n,i,s,o,a,c,g,u){var f=(c&Ee)!==0,v=(c&St)===0,_=f?v?bt(i,!1,!1):Pe(i):i,l=(c&ke)===0?o:Pe(o),p={i:l,v:_,k:s,a:null,e:null,prev:r,next:n};try{if(e===null){var h=document.createDocumentFragment();h.append(e=Ke())}return p.e=Oe(()=>a(e,_,l,g),se),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?u||(t.first=p):(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function De(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==null&&s!==n;){var o=kt(s);i.before(s),s=o}}function $(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function nt(e,t,r){$e(()=>{var n=pe(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}function ot(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ye(t))return Dt();for(var n of e.options)n.selected=t.includes(ye(n));return}for(n of e.options){var i=ye(n);if(qt(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Xt(e){var t=new MutationObserver(()=>{ot(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),It(()=>{t.disconnect()})}function qe(e,t,r=t){var n=!0;et(e,"change",i=>{var s=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),ye);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");o=a&&ye(a)}r(o)}),$e(()=>{var i=t();if(ot(e,i,n),n&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=ye(s),r(i))}e.__value=i,n=!1}),Xt(e)}function ye(e){return"__value"in e?e.__value:e.value}function Kt(e,t,r=t){var n=new WeakSet;et(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=Ie(e)?Re(s):s,r(s),me!==null&&n.add(me),await Rt(),s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),(se&&e.defaultValue!==e.value||pe(t)==null&&e.value)&&(r(Ie(e)?Re(e.value):e.value),me!==null&&n.add(me)),Mt(()=>{var i=t();if(e===document.activeElement){var s=Ot??me;if(n.has(s))return}Ie(e)&&i===Re(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Ie(e){var t=e.type;return t==="number"||t==="range"}function Re(e){return e===""?null:+e}function j(e){return(e?.textContent||"").trim()}function ee(e,t){const r=e?.getAttribute(t);return r??void 0}function B(e,t){const r=e.getElementsByTagNameNS?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t);return r&&r.length?r[0]:null}function ve(e,t){const r=e.getElementsByTagNameNS?e.getElementsByTagNameNS("*",t):e.getElementsByTagName(t);return Array.from(r)}function Vt(e){const t=e.querySelector("rss > channel, rdf\\:RDF > channel, channel")||B(e,"channel");if(!t)return null;const r=j(B(t,"title")||t.querySelector("title")),n=B(t,"link")||t.querySelector("link[href], link"),i=ee(n,"href")||j(n),s=[],o=ve(t,"item");return(o.length?o:Array.from(t.querySelectorAll("item"))).forEach(a=>{const c=j(B(a,"title")||a.querySelector("title")),g=B(a,"link")||a.querySelector("link[href], link"),u=ee(g,"href")||j(g),f=j(B(a,"guid")||a.querySelector("guid")),v=j(B(a,"pubDate")||a.querySelector("pubDate"))||j(B(a,"date")||a.querySelector("dc\\:date, date")),_=B(a,"encoded")||a.querySelector("content\\:encoded"),l=_?_.textContent||"":void 0,p=j(B(a,"description")||a.querySelector("description")),h=B(a,"enclosure")||a.querySelector("enclosure"),E=h?{url:ee(h,"url"),type:ee(h,"type")}:void 0,C=[],L=ve(a,"category"),x=(L.length?L:Array.from(a.querySelectorAll("category"))).map(S=>j(S)).filter(Boolean);s.push({title:c,link:u,guid:f,pubDate:v,description:p,content:p,"content:encoded":l,"media:content":C,enclosure:E,categories:x})}),{title:r,link:i,items:s}}function Yt(e){const t=B(e,"feed")||e.querySelector("feed");if(!t)return null;const r=j(B(t,"title")||t.querySelector("title"));let n;const i=ve(t,"link"),s=i.length?i:Array.from(t.querySelectorAll("link[href]"));for(const c of s){const g=(c.getAttribute("rel")||"alternate").toLowerCase(),u=ee(c,"href");if(u&&(g==="alternate"||!n)&&(n=u,g==="alternate"))break}const o=[],a=ve(t,"entry");return(a.length?a:Array.from(t.querySelectorAll("entry"))).forEach(c=>{const g=j(B(c,"title")||c.querySelector("title"));let u;const f=ve(c,"link"),v=f.length?f:Array.from(c.querySelectorAll("link[href]"));for(const U of v){const W=(U.getAttribute("rel")||"alternate").toLowerCase(),P=ee(U,"href");if(P&&(W==="alternate"||!u)&&(u=P,W==="alternate"))break}const _=j(B(c,"id")||c.querySelector("id")),l=j(B(c,"published")||c.querySelector("published")),p=j(B(c,"updated")||c.querySelector("updated")),h=B(c,"content")||c.querySelector("content"),E=ee(h,"type")||"text",C=h&&h.textContent||"",L=j(B(c,"summary")||c.querySelector("summary")),x=v.find(U=>(U.getAttribute("rel")||"").toLowerCase()==="enclosure"),S=x?{url:ee(x,"href"),type:ee(x,"type")}:void 0,y=[],k=ve(c,"category"),R=(k.length?k:Array.from(c.querySelectorAll("category"))).map(U=>ee(U,"term")||j(U)).filter(Boolean);o.push({title:g,link:u,guid:_,isoDate:p||l||void 0,content:L,"content:encoded":E.includes("html")?C:void 0,"media:content":y,enclosure:S,categories:R})}),{title:r,link:n,items:o}}function we(e){const r=new DOMParser().parseFromString(e,"application/xml");if(r.querySelector("parsererror"))throw new Error("Invalid XML");return Vt(r)||Yt(r)||{title:void 0,link:void 0,items:[]}}const Qt="Uncategorized",Jt=[{name:"Politics",aliases:["politics","government","state","assembly","congress","parliament","politica","gobierno","estado","asamblea","congreso","parlamento"],keywords:["politica","gobierno","eleccion","elecciones","ministro","ministra","presidente","presidenta","partido","parlamento","congreso","alcalde","alcaldesa","diputado","senado","decreto","cne","tsj","constitucion","ley","mandato","gobernador","gobernadora"]},{name:"Economy",aliases:["economy","business","finance","markets","economia","negocios","finanzas","mercados"],keywords:["economia","inflacion","dolar","bolivar","banco","finanzas","mercado","precio","salario","impuesto","negocio","empresa","petroleo","exportacion","importacion","pib","credito","devaluacion","divisas","bcv","bono"]},{name:"Sports",aliases:["sports","sport","deporte"],keywords:["futbol","futbolista","gol","liga","beisbol","beisbolista","baloncesto","tenis","nba","mlb","mundial","partido","marcador","seleccion","vinotinto","olimpico","olimpiadas"]},{name:"Technology",aliases:["technology","tech","tecnologia"],keywords:["tecnologia","software","aplicacion","app","ia","inteligencia artificial","ciberseguridad","internet","redes sociales","google","apple","microsoft","android","ios","startup","algoritmo","programacion","nube","cloud","chip","semiconductor"]},{name:"Culture",aliases:["culture","arts","arte","cultural"],keywords:["cultura","arte","teatro","literatura","libro","musica","concierto","festival","cine","pelicula","exposicion","museo"]},{name:"Entertainment",aliases:["entertainment","showbiz","espectaculos","farándula","farandula"],keywords:["farandula","famoso","celebridad","espectaculo","television","serie","streaming","netflix","hollywood","premios","reality"]},{name:"Health",aliases:["health","wellness","salud","bienestar"],keywords:["salud","covid","coronavirus","hospital","medico","medicina","vacuna","oms","enfermedad","clinica","epidemia","pandemia"]},{name:"International",aliases:["world","global","mundo","internacional"],keywords:["eeuu","estados unidos","onu","europa","rusia","china","ucrania","conflicto","guerra","frontera","internacional","diplomacia","geopolitica"]},{name:"Society",aliases:["society","community","social","comunidad","país","pais"],keywords:["comunidad","educacion","escuela","universidad","transporte","servicios","protesta","ciudadania","barrio","familia","trabajo","empleo"]},{name:"Crime",aliases:["crime","crimen","public safety","security","police","seguridad","policiales"],keywords:["accidente","homicidio","robo","incendio","policia","tribunal","fiscalia","delito","crimen","detenido","carcel","secuestro"]},{name:"Opinion",aliases:["opinion","editorial","columns","columnas"],keywords:["opinion","editorial","columna","analisis","tribuna","ensayo"]},{name:"Weather",aliases:["weather","forecast","tiempo"],keywords:["clima","lluvia","tormenta","huracan","temperatura","sequia","alerta meteorologica"]},{name:"Science",aliases:["science","scientific","cientifica"],keywords:["ciencia","investigacion","estudio","cientifico","espacio","nasa","astronomia"]},{name:"Food",aliases:["food","dining","cuisine","gastronomia","comida","cocina"],keywords:["gastronomia","restaurante","receta","cocina","chef","comida","bebida"]}],Ne={fallbackLabel:Qt,categories:Jt};function V(e){if(e==null)return"";if(typeof e=="string")return e;if(Array.isArray(e))return V(e[0]);if(typeof e=="object"){if(typeof e._=="string")return e._;if(typeof e["#text"]=="string")return e["#text"];if(typeof e.href=="string")return e.href;if(e.$&&typeof e.$.href=="string")return e.$.href;if(e.$&&typeof e.$.url=="string")return e.$.url;if(typeof e.url=="string")return e.url}try{return String(e)}catch{return""}}function We(e){if(!e)return null;const t=e.match(/<img\s+[^>]*src=["']([^"']+)["'][^>]*>/i);return t?t[1]:null}function Zt(e){const t=e.isoDate,r=e.pubDate,n=t||r;if(!n)return{date:null};const i=new Date(n);return isNaN(i.getTime())?{date:null}:{date:i,iso:i.toISOString()}}function $t(e){const t=e.enclosure;if(t?.url&&(!t.type||t.type.startsWith("image/")))return t.url;const r=e["media:content"];if(r){if(Array.isArray(r)){const a=r.find(c=>c.$?.url)?.$?.url||r.find(c=>c.url)?.url;if(a)return a}else if(typeof r=="object"){const a=r?.$?.url||r?.url;if(a)return a}}const n=e["content:encoded"],i=We(n);if(i)return i;const s=We(e.content);if(s)return s;const o=e.image;return o||null}function Xe(e){return e?String(e).replace(/<[^>]*>/g," "):""}function _e(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function er(e,t){if(!e)return"";let r=e;const i=t?(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t):"",s=[/(?:^|\s)(?:The\s+post|This\s+article)[^.\n]*\bappeared\s+first\s+on\b[^.\n]*[.\n]?/gi,/(?:^|\s)Originally\s+published\s+(?:on|in)[^.\n]*[.\n]?/gi,/(?:^|\s)(?:El|La|Esta|Este)\s+(?:art[íi]culo|entrada|publicaci[óo]n|post)[^.\n]*\b(?:se\s+public[óo]|publicado|publicada)\s+(?:primero|originalmente)\s+en\b[^.\n]*[.\n]?/gi,/(?:^|\s)apareci[óo]\s+primero\s+en\b[^.\n]*[.\n]?/gi];i&&s.push(new RegExp(`(?:^|\\s)(?:apareci[óo]\\s+primero\\s+en|se\\s+public[óo]\\s+(?:primero|originalmente)\\s+en|appeared\\s+first\\s+on)\\s+${i}[^.\\n]*[.\\n]?`,"gi"));for(const o of s)r=r.replace(o," ");return r.replace(/\s+/g," ").trim()}const tr=Ne.fallbackLabel,st=(Ne.categories||[]).map(e=>({name:e.name,aliases:e.aliases||[],keywords:(e.keywords||[]).map(t=>t)})),rr=(()=>{const e={};for(const t of st){const r=_e(t.name);e[r]=t.name;for(const n of t.aliases||[])e[_e(n)]=t.name}return e})();function ar(e){const t=_e(e),r=[];for(const s of st){let o=0;for(const a of s.keywords)if(typeof a=="string"){const c=_e(a),g=new RegExp(`\\b${c.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\$&")}\\b`,"g");o+=(t.match(g)||[]).length}else o+=(t.match(a)||[]).length;o>0&&r.push({name:s.name,score:o})}if(!r.length)return[];r.sort((s,o)=>o.score-s.score);const n=r[0].score;return r.filter(s=>s.score>=Math.max(1,Math.round(n*.6))).slice(0,3).map(s=>s.name)}function nr(e){const t=[];e.title&&t.push(V(e.title)),e.contentSnippet&&t.push(V(e.contentSnippet));const r=e["content:encoded"],n=V(r);return n&&t.push(Xe(n)),e.content&&t.push(Xe(V(e.content))),Array.isArray(e.categories)&&t.push(e.categories.map(i=>V(i)).join(" ")),t.join(` 
 `).slice(0,4e3)}const or=4e3,sr=6500;async function Se(e,t){const r=await t(e,{headers:{Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml, text/plain, */*"}});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.text()}function ir(e){return`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`}function lr(e){return`https://cors.isomorphic-git.org/${e}`}function cr(e){return`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(e)}`}function ur(e,t){const{date:r,iso:n}=Zt(e),i=V(e.link).trim(),s=(V(e.title)||"(untitled)").trim(),o=V(e.guid)||i||s+(n||""),a=e.categories?.filter(Boolean).map(l=>V(l))||[];let c=V(e.contentSnippet).trim()||(e.content?V(e.content).replace(/<[^>]+>/g,"").slice(0,280):"")||"";c=er(c,t?.title);const g=$t(e),u=ar(nr(e)),f=a.map(l=>rr[_e(l)]).filter(Boolean),v=Array.from(new Set([...u||[],...f])),_=v.length?v:[tr];return{id:o,title:s,link:i,date:r,dateISO:n,categories:_,image:g,summary:c,source:{title:t?.title,url:t?.link}}}async function dr(e,t){const r=Array.from(new Set(e.map(u=>u.trim()).filter(Boolean))),n=[],i=t??fetch;function s(u){try{return!new URL(u).protocol.startsWith("http")}catch{return!0}}const o=async(u,f,v)=>{let _;return await Promise.race([v(),new Promise((l,p)=>{_=setTimeout(()=>p(new Error(`${f} timeout`)),u)})]).finally(()=>clearTimeout(_))},a=r.map(async u=>{const f=Date.now();if(s(u))return n.push({url:u,message:"Invalid URL"}),[];const v=f+sr,l=(()=>{try{return new URL(u).protocol}catch{return"https:"}})()==="https:",p=[];p.push({label:"allorigins+xml+dom",run:async()=>we(await Se(ir(u),i))}),p.push({label:"codetabs+xml+dom",run:async()=>we(await Se(cr(u),i))}),p.push({label:"isomorphic-git+xml+dom",run:async()=>we(await Se(lr(u),i))}),l&&p.push({label:"direct+xml+dom",run:async()=>we(await Se(u,i))});for(const h of p){if(Date.now()>v)break;try{const E=await o(or,h.label,h.run),C={title:V(E.title)||void 0,link:V(E.link)||void 0};return(E.items||[]).map(L=>ur(L,C))}catch{if(Date.now()>v)break}}return n.push({url:u,message:"Timeout / error reading feed"}),[]});return{items:(await Promise.all(a)).flat().sort((u,f)=>{const v=u.date?u.date.getTime():0;return(f.date?f.date.getTime():0)-v}),errors:n}}const fr=async({url:e,fetch:t,depends:r,data:n})=>{r("app:feeds");const i=e.searchParams.getAll("feed"),s=e.searchParams.get("feeds"),o=new Set;i.forEach(l=>o.add(l)),s&&s.split(",").forEach(l=>o.add(l.trim()));const c=Array.from(o.size?o:[]).map(l=>l.trim()).filter(l=>l.length>0),{items:g,errors:u}=await dr(c,t),f=Ne.fallbackLabel,v={};for(const l of g){const p=l.categories.length?l.categories:[f];for(const h of p){const E=h.trim()||"Uncategorized";v[E]||=[],v[E].push(l)}}const _=Object.keys(v).sort((l,p)=>l===f&&p===f?0:l===f?1:p===f?-1:l.localeCompare(p));return{items:g,byCategory:v,categories:_,errors:u,sources:c}},Vr=Object.freeze(Object.defineProperty({__proto__:null,load:fr},Symbol.toStringTag,{value:"Module"})),mr=()=>{const e=Ut;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},vr={subscribe(e){return mr().navigating.subscribe(e)}};var gr=G('<form class="feed-form"><label class="filter-label" for="feeds">Feeds (URLs):</label> <textarea id="feeds" class="filter-input feed-textarea" placeholder="https://example.com/rss, https://another.com/feed"></textarea> <div class="actions"><button class="filter-btn" type="submit">Load</button></div></form>');function pr(e,t){ue(t,!0);const r=tt();let n=z(t,"feedInput",7,""),i=z(t,"navigating",3,!1);function s(u){u.preventDefault(),r("submit",{feedInput:n()})}var o=gr(),a=q(A(o),2);Ft(a),Q(a,"rows",3);var c=q(a,2),g=A(c);w(c),w(o),K(()=>g.disabled=i()),rt("submit",o,s),Kt(a,n),O(e,o),de()}var yr=G("<li><code> </code> </li>"),hr=G('<div class="errors"><strong>Errors reading feeds:</strong> <ul></ul></div>');function _r(e,t){ue(t,!0);let r=z(t,"errors",19,()=>[]);var n=Ae(),i=he(n);{var s=o=>{var a=hr(),c=q(A(a),2);le(c,21,r,ie,(g,u)=>{var f=yr(),v=A(f),_=A(v,!0);w(v);var l=q(v);w(f),K(()=>{J(_,m(u).url),J(l,`: ${m(u).message??""}`)}),O(g,f)}),w(c),w(a),O(o,a)};ne(i,o=>{r().length&&o(s)})}O(e,n),de()}function Be(e){try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return""}}function br(e){if(!e)return"";try{const t=new Date(e),r=new Date;let n=r.getTime()-t.getTime();n<0&&(n=0);const i=Math.floor(n/1e3),s=Math.floor(i/60),o=Math.floor(s/60),a=Math.floor(o/24),c=(()=>{const g=new Date(r);g.setHours(0,0,0,0);const u=new Date(t);return u.setHours(0,0,0,0),Math.round((g.getTime()-u.getTime())/864e5)===1})();return i<60?"just now":s<60?s===1?"a minute ago":`${s} minutes ago`:o<24?o===1?"an hour ago":`${o} hours ago`:c?"yesterday":a<7?a===1?"a day ago":`${a} days ago`:t.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"}).replace(".","")}catch{return e}}var wr=G('<a class="source-pill" target="_blank" rel="noopener noreferrer"> </a>'),Sr=G('<div class="sources"><span class="filter-label">Sources:</span> <!></div>');function kr(e,t){ue(t,!0);let r=z(t,"sources",19,()=>[]);var n=Ae(),i=he(n);{var s=o=>{var a=Sr(),c=q(A(a),2);le(c,17,r,ie,(g,u)=>{var f=wr(),v=A(f,!0);w(f),K(_=>{Q(f,"href",m(u)),J(v,_)},[()=>Be(m(u))]),O(g,f)}),w(a),O(o,a)};ne(i,o=>{r().length&&o(s)})}O(e,n),de()}function Er(e,t){t("toggleRandom")}function Ar(e,t){t("toggleGroup")}var xr=G("<option> </option>"),Tr=G("<option> </option>"),Cr=G("<option> </option>"),Lr=G('<nav class="filters"><div class="filters__row"><div class="filters__group filters__categories"><span class="filter-label">Categories:</span> <div class="categories-select" aria-hidden="false"><select class="filter-select" aria-label="Select category"></select></div></div> <div class="filters__group filters__sources"><span class="filter-label">Source:</span> <div class="sources-select" aria-hidden="false"><select class="filter-select" aria-label="Select source"></select></div></div> <div class="filters__group filters__date"><span class="filter-label">Date:</span> <label><span class="sr-only">Date range</span> <select class="filter-select" aria-label="Date range"><option>All</option><!></select></label></div></div> <div class="filters__row"><div class="filters__group filters__random"><button class="filter-btn" type="button" title="Random item (filter)">Random</button></div> <div class="filters__group filters__grouping"><button class="filter-btn" type="button" title="Group by category">Group</button></div></div></nav>');function Dr(e,t){ue(t,!1);let r=z(t,"categories",24,()=>[]),n=z(t,"selectedCategory",12,"All"),i=z(t,"selectedSource",12,"All"),s=z(t,"dateFilter",12,"all"),o=z(t,"days",24,()=>[]),a=z(t,"randomActive",8,!1),c=z(t,"groupByCategory",8,!1),g=z(t,"randomDisabled",8,!1),u=z(t,"groupDisabled",8,!1),f=z(t,"sourceOptions",24,()=>[]);const v=tt();Gt();var _=Lr(),l=A(_),p=A(l),h=q(A(p),2),E=A(h);K(()=>{n(),Le(()=>{r()})}),le(E,5,r,ie,(X,F)=>{var M=xr(),ae=A(M,!0);w(M);var Z={};K(()=>{J(ae,m(F)),Z!==(Z=m(F))&&(M.value=(M.__value=m(F))??"")}),O(X,M)}),w(E),w(h),w(p);var C=q(p,2),L=q(A(C),2),x=A(L);K(()=>{i(),Le(()=>{f()})}),le(x,5,f,ie,(X,F)=>{var M=Tr(),ae=A(M,!0);w(M);var Z={};K(()=>{J(ae,m(F)),Z!==(Z=m(F))&&(M.value=(M.__value=m(F))??"")}),O(X,M)}),w(x),w(L),w(C);var S=q(C,2),y=q(A(S),2),k=q(A(y),2);K(()=>{s(),Le(()=>{o()})});var R=A(k);R.value=R.__value="all";var U=q(R);le(U,1,o,ie,(X,F)=>{var M=Cr(),ae=A(M,!0);w(M);var Z={};K(()=>{J(ae,(m(F),pe(()=>m(F).label))),Z!==(Z=(m(F),pe(()=>`day:${m(F).key}`)))&&(M.value=(M.__value=(m(F),pe(()=>`day:${m(F).key}`)))??"")}),O(X,M)}),w(k),w(y),w(S),w(l);var W=q(l,2),P=A(W),H=A(P);H.__click=[Er,v],w(P);var te=q(P,2),re=A(te);re.__click=[Ar,v],w(te),w(W),w(_),K(()=>{Q(H,"aria-pressed",a()),H.disabled=c()||g(),Q(re,"aria-pressed",c()),re.disabled=a()||u()}),qe(E,n),qe(x,i),qe(k,s),O(e,_),de()}Pt(["click"]);function it(e){const t=()=>{const a=getComputedStyle(e),c=parseFloat(a.rowGap||"8"),g=parseFloat(a.gridAutoRows||"8");e.querySelectorAll(".card").forEach(f=>{f.style.gridRowEnd="span 1";const v=f.getBoundingClientRect().height,_=Math.max(1,Math.ceil((v+c)/(g+c)));f.style.gridRowEnd=`span ${_}`})},r=()=>t();window.addEventListener("resize",r);const n=e.querySelectorAll("img");n.forEach(a=>{a.complete||(a.addEventListener("load",r),a.addEventListener("error",r))});const i=new ResizeObserver(()=>t()),s=()=>e.querySelectorAll(".card").forEach(a=>i.observe(a));s();const o=new MutationObserver(()=>{i.disconnect(),s(),t()});return o.observe(e,{childList:!0,subtree:!0}),queueMicrotask(t),{destroy(){window.removeEventListener("resize",r),n.forEach(a=>{a.removeEventListener("load",r),a.removeEventListener("error",r)}),i.disconnect(),o.disconnect()}}}var qr=G('<img decoding="async"/>'),Ir=G("<time> </time>"),Rr=G('<article class="card"><a class="card__image" target="_blank" rel="noopener noreferrer"><!></a> <div class="card__body"><h3 class="card__title"><a target="_blank" rel="noopener noreferrer"> </a></h3> <p class="card__summary"> </p></div> <div class="card__meta"><span class="source"> </span> <!></div></article>');function lt(e,t){ue(t,!0);let r=z(t,"index",3,0);function n(x){const S=x.currentTarget;S.style.display="none"}function i(){return t.item.source.title||Be(t.item.source.url)}var s=Rr(),o=A(s),a=A(o);{var c=x=>{var S=qr();K(()=>{Q(S,"src",t.item.image),Q(S,"alt",t.item.title),Q(S,"loading",r()<12?"eager":"lazy")}),rt("error",S,n),Ht(S),O(x,S)};ne(a,x=>{t.item.image&&x(c)})}w(o);var g=q(o,2),u=A(g),f=A(u),v=A(f,!0);w(f),w(u);var _=q(u,2),l=A(_,!0);w(_),w(g);var p=q(g,2),h=A(p),E=A(h,!0);w(h);var C=q(h,2);{var L=x=>{var S=Ir(),y=A(S,!0);w(S),K(k=>{Q(S,"datetime",t.item.dateISO),J(y,k)},[()=>br(t.item.dateISO)]),O(x,S)};ne(C,x=>{t.item.dateISO&&x(L)})}w(p),w(s),K(x=>{Q(s,"data-index",r()),Q(o,"href",t.item.link),Q(o,"aria-label",t.item.title),Q(f,"href",t.item.link),J(v,t.item.title),J(l,t.item.summary),J(E,x)},[i]),O(e,s),de()}var Mr=G('<section class="category"><h2 class="category__title">Results</h2> <div class="gallery masonry"></div></section>');function Or(e,t){let r=z(t,"items",19,()=>[]);var n=Mr(),i=q(A(n),2);le(i,21,r,ie,(s,o,a)=>{lt(s,{get item(){return m(o)},index:a})}),w(i),nt(i,s=>it?.(s)),w(n),O(e,n)}var Fr=G('<section class="category"><h2 class="category__title"> </h2> <div class="gallery masonry"></div></section>');function Nr(e,t){ue(t,!0);let r=z(t,"categories",19,()=>[]),n=z(t,"byCategory",19,()=>({}));var i=Ae(),s=he(i);le(s,17,r,ie,(o,a)=>{var c=Fr(),g=A(c),u=A(g,!0);w(g);var f=q(g,2);le(f,21,()=>n()[m(a)],ie,(v,_,l)=>{lt(v,{get item(){return m(_)},index:l})}),w(f),nt(f,v=>it?.(v)),w(c),K(()=>J(u,m(a))),O(o,c)}),O(e,i),de()}function Me(e){return e.source.title&&e.source.title.trim()||Be(e.source.url)||"Unknown source"}var Br=G('<div class="grid-overlay" role="status" aria-live="polite"><div class="spinner" aria-hidden="true"></div> <span class="grid-overlay__text">Loading…</span></div>'),Ur=G('<div class="empty-state" role="status" aria-live="polite"><h2 class="empty-state__title">No items loaded</h2> <p class="empty-state__msg">Paste one or more RSS feed URLs above and press <strong>Load</strong> to get started.</p></div>'),zr=G('<section class="controls"><!> <!> <!></section> <!> <!> <!>',1);function Yr(e,t){ue(t,!0);const r=()=>Bt(vr,"$navigating",n),[n,i]=Nt();let s=oe(Ge(t.data.sources.join(", "))),o=oe(Ge(t.data.sources.length>0||t.data.items.length>0));je(()=>{Y(o,t.data.sources.length>0||t.data.items.length>0,!0)});let a="",c=oe("All"),g=oe(!1),u=oe("All"),f=oe("all"),v=oe(!1),_=oe(null);function l(d){return d.link&&String(d.link)||d.id||`${d.title}|${d.dateISO||""}`}const p=fe(()=>["All",...t.data.categories]);function h(){return!(!m(g)||m(c)!=="All"||a.trim()||m(f)!=="all"||m(v))}const E=fe(()=>(()=>{let d=t.data.items;m(u)!=="All"&&(d=d.filter(T=>Me(T)===m(u)));const b={};for(const T of d){const N=T.categories&&T.categories.length?T.categories:["Uncategorized"];for(const ce of N){const be=ce.trim()||"Uncategorized";(b[be]||=[]).push(T)}}const I=Object.keys(b),D="Uncategorized";return I.sort((T,N)=>T===D&&N===D?0:T===D?1:N===D?-1:T.localeCompare(N)),{categories:I,byCategory:b}})());function C(d,b){return typeof d=="number"&&typeof b=="number"?d-b:String(d).localeCompare(String(b))}function L(){let d=t.data.items;if(m(f)!=="all"){const T=m(f).slice(4),N=new Date(`${T}T00:00:00`),ce=new Date(N);ce.setDate(ce.getDate()+1),d=d.filter(be=>{if(!be.date)return!1;const Ue=be.date.getTime();return Ue>=N.getTime()&&Ue<ce.getTime()})}m(c)!=="All"&&(d=d.filter(T=>T.categories.includes(m(c)))),m(u)!=="All"&&(d=d.filter(T=>Me(T)===m(u)));const b=a.trim().toLowerCase();b&&(d=d.filter(T=>{const N=(T.source.title||"")+" "+(T.source.url||"");return T.title.toLowerCase().includes(b)||(T.summary||"").toLowerCase().includes(b)||N.toLowerCase().includes(b)}));const I=-1,D=d.map(T=>({it:T,k:T.date?T.date.getTime():0}));return D.sort((T,N)=>I*C(T.k,N.k)),D.map(T=>T.it)}function x(){const d=L();return m(v)&&m(_)?d.filter(b=>l(b)===m(_)):d}function S(){const d=I=>I.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}),b=new Map;for(const I of t.data.items){if(!I.date)continue;const D=I.date.toISOString().slice(0,10);b.has(D)||b.set(D,d(I.date))}return Array.from(b.entries()).sort((I,D)=>I[0]<D[0]?1:-1).map(([I,D])=>({key:I,label:D}))}function y(d){d.preventDefault();const b=new URLSearchParams,I=m(s).split(/[\n,]/).map(D=>D.trim()).filter(Boolean);if(I.length<=3)for(const D of I)b.append("feed",D);else b.set("feeds",I.join(","));zt(`?${b.toString()}`)}function k(){const d=new Set;for(const b of t.data.items)d.add(Me(b));return["All",...Array.from(d).sort((b,I)=>b.localeCompare(I))]}function R(){if(m(v))Y(v,!1),Y(_,null);else{const d=L();if(d.length===0)return;const b=Math.floor(Math.random()*d.length);Y(_,l(d[b]),!0),Y(v,!0)}}je(()=>{if(!m(v))return;const d=L();if(d.length===0){Y(v,!1),Y(_,null);return}if(!m(_)||!d.some(b=>l(b)===m(_))){const b=Math.floor(Math.random()*d.length);Y(_,l(d[b]),!0)}});var U=zr(),W=he(U),P=A(W);{let d=fe(()=>!!r());pr(P,{get feedInput(){return m(s)},get navigating(){return m(d)},$$events:{submit:b=>{Y(s,b.detail.feedInput,!0),y(new Event("submit"))}}})}var H=q(P,2);_r(H,{get errors(){return t.data.errors}});var te=q(H,2);{var re=d=>{kr(d,{get sources(){return t.data.sources}})};ne(te,d=>{m(o)&&d(re)})}w(W);var X=q(W,2);{var F=d=>{{let b=fe(S),I=fe(k);Dr(d,{get categories(){return m(p)},get days(){return m(b)},get randomActive(){return m(v)},get groupByCategory(){return m(g)},get sourceOptions(){return m(I)},get selectedCategory(){return m(c)},set selectedCategory(D){Y(c,D,!0)},get selectedSource(){return m(u)},set selectedSource(D){Y(u,D,!0)},get dateFilter(){return m(f)},set dateFilter(D){Y(f,D,!0)},$$events:{toggleRandom:R,toggleGroup:()=>Y(g,!m(g))}})}};ne(X,d=>{m(o)&&d(F)})}var M=q(X,2);{var ae=d=>{var b=Br();O(d,b)};ne(M,d=>{r()&&d(ae)})}var Z=q(M,2);{var ct=d=>{var b=Ur();O(d,b)},ut=d=>{var b=Ae(),I=he(b);{var D=N=>{Nr(N,{get categories(){return m(E).categories},get byCategory(){return m(E).byCategory}})},T=N=>{{let ce=fe(x);Or(N,{get items(){return m(ce)}})}};ne(I,N=>{h()?N(D):N(T,!1)},!0)}O(d,b)};ne(Z,d=>{t.data.items.length===0?d(ct):d(ut,!1)})}O(e,U),de(),i()}export{Yr as component,Vr as universal};
